<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JPCRE2: JPCRE2</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="thumb0.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">JPCRE2
   &#160;<span id="projectnumber">10.31.04</span>
   </div>
   <div id="projectbrief">C++ wrapper for PCRE2 library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">JPCRE2 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>C++ wrapper for PCRE2 library</p>
<p><a href="https://travis-ci.org/jpcre2/jpcre2/"><object type="image/svg+xml" data="https://travis-ci.org/jpcre2/jpcre2.svg?branch=release" style="pointer-events: none;">Build status image</object></a> <a href="https://coveralls.io/github/jpcre2/jpcre2?branch=release"><object type="image/svg+xml" data="https://coveralls.io/repos/github/jpcre2/jpcre2/badge.svg?branch=release" style="pointer-events: none;">Coverage Status</object></a> <a href="https://isocpp.org/"><object type="image/svg+xml" data="https://neurobin.org/img/badge/CPP-depends1.svg" style="pointer-events: none;">CPP depends image</object></a> <a href="http://www.pcre.org/"><object type="image/svg+xml" data="https://neurobin.org/img/badge/PCRE2-dep1.svg" style="pointer-events: none;">PCRE2 depends image</object></a></p>
<blockquote class="doxtable">
<p>PCRE2 is the name used for a revised API for the PCRE library, which is a set of functions, written in C, that implement regular expression pattern matching using the same syntax and semantics as Perl, with just a few differences. Some features that appeared in Python and the original PCRE before they appeared in Perl are also available using the Python syntax. </p>
</blockquote>
<p>This provides some C++ wrapper classes/functions to perform regex operations such as regex match and regex replace.</p>
<p>You can read the complete documentation <a href="http://docs.neurobin.org/jpcre2/">here</a> or download it from <a href="https://github.com/jpcre2/jpcre2-doc">jpcre2-doc repository</a>.</p>
<h1><a class="anchor" id="dependency"></a>
Dependency</h1>
<ol type="1">
<li>PCRE2 library (<code>version &gt;=10.21</code>).</li>
</ol>
<p>If the required PCRE2 version is not available in the official channel, you can download <a href="https://github.com/jpcre2/pcre2">my fork of the library</a>.</p>
<h1><a class="anchor" id="getting-started"></a>
Getting started</h1>
<p>This is a <b>header only</b> library. All you need to do is include the header <code><a class="el" href="jpcre2_8hpp.html" title="Main header file for JPCRE2 library to be included by programs that uses its functionalities....">jpcre2.hpp</a></code> in your program.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="jpcre2_8hpp.html">jpcre2.hpp</a>&quot;</span></div>
</div><!-- fragment --><p><b>Notes:</b></p>
<ul>
<li><code><a class="el" href="jpcre2_8hpp.html" title="Main header file for JPCRE2 library to be included by programs that uses its functionalities....">jpcre2.hpp</a></code> #includes <code>pcre2.h</code>, thus you don't need to include <code>pcre2.h</code> manually in your program.</li>
<li>If <code>pcre2.h</code> is in a non-standard path then you may include it before <code><a class="el" href="jpcre2_8hpp.html" title="Main header file for JPCRE2 library to be included by programs that uses its functionalities....">jpcre2.hpp</a></code> with correct path (you will need to define <code>PCRE2_CODE_UNIT_WIDTH</code> before including <code>pcre2.h</code> in this case)</li>
<li>There's no need to define <code>PCRE2_CODE_UNIT_WIDTH</code> before including <code><a class="el" href="jpcre2_8hpp.html" title="Main header file for JPCRE2 library to be included by programs that uses its functionalities....">jpcre2.hpp</a></code>.</li>
<li>On windows, if you are working with a static PCRE2 library, you must define <code>PCRE2_STATIC</code> before including <code><a class="el" href="jpcre2_8hpp.html" title="Main header file for JPCRE2 library to be included by programs that uses its functionalities....">jpcre2.hpp</a></code> (or before <code>pcre2.h</code> if you included it manually).</li>
</ul>
<p><b>Install:</b></p>
<p>You can copy this header to a standard include directory (folder) so that it becomes available from a standard include path.</p>
<p><b><a href="https://github.com/jpcre2/jpcre2/archive/release.zip">Download</a> or clone the release branch unless you want the master (continuous dev) branch specifically:</b></p>
<div class="fragment"><div class="line">git clone --branch release https://github.com/jpcre2/jpcre2</div>
</div><!-- fragment --><p>On Unix you can do:</p>
<div class="fragment"><div class="line">./configure</div>
<div class="line">make</div>
<div class="line">make install #(may require root privilege)</div>
</div><!-- fragment --><p>It will check if all dependencies are satisfied and install the header in a standard include path.</p>
<p><b>Compile/Build:</b></p>
<p>Compile/Build your code with corresponding PCRE2 libraries linked. For 8-bit code unit width, you need to link with 8-bit library, for 16-bit, 16-bit library and so on. If you want to use multiple code unit width, link against all 8-bit, 16-bit and 32-bit libraries. See <a href="#code-unit-and-character-type">code unit width and character type</a> for details.</p>
<p><b>Example compilation with g++:</b></p>
<div class="fragment"><div class="line">g++ main.cpp -lpcre2-8</div>
<div class="line">g++ multi.cpp -lpcre2-8 -lpcre2-16 -lpcre2-32</div>
</div><!-- fragment --><p>If PCRE2 is not installed in the standard path, add the path with <code>-L</code> option:</p>
<div class="fragment"><div class="line">g++ main.cpp -L/my/library/path -lpcre2-8</div>
</div><!-- fragment --><h1><a class="anchor" id="coding-guide"></a>
Basic usage</h1>
<p>Performing a match or replacement against regex pattern involves two steps:</p>
<ol type="1">
<li>Compiling the pattern</li>
<li>Performing the match or replacement operation</li>
</ol>
<h2><a class="anchor" id="compile-a-regex-pattern"></a>
Compile a regex pattern</h2>
<p>Select a character type according to the library you want to use. In this doc we are going to use 8 bit library as reference and we will use <code>char</code> as the character type. If <code>char</code> in your system is 16-bit you will have to link against 16-bit library instead, same goes for 32-bit. Other bit sizes are not supported by PCRE2.</p>
<p>Let's use a typedef to shorten the code:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <a class="code" href="structjpcre2_1_1select.html">jpcre2::select&lt;char&gt;</a> <a class="code" href="structjpcre2_1_1select.html">jp</a>;</div>
<div class="line"><span class="comment">// You have to select the basic data type (char, wchar_t, char16_t or char32_t)</span></div>
</div><!-- fragment --><h3><a class="anchor" id="a-regex-object"></a>
A Regex object</h3>
<p>(You can use temporary objects too, see <a href="#short-examples">short examples</a>).</p>
<p>This object will hold the pattern, options and compiled pattern.</p>
<div class="fragment"><div class="line"><a class="code" href="classjpcre2_1_1select_1_1Regex.html">jp::Regex</a> re;</div>
</div><!-- fragment --><p>Each object for each regex pattern.</p>
<h3><a class="anchor" id="compile-the-regex"></a>
Compile the regex</h3>
<div class="fragment"><div class="line">re.setPattern(<span class="stringliteral">&quot;(?:(?&lt;word&gt;[?.#@:]+)|(?&lt;word&gt;\\w+))\\s*(?&lt;digit&gt;\\d+)&quot;</span>)  <span class="comment">//set pattern</span></div>
<div class="line">  .addModifier(<span class="stringliteral">&quot;iJ&quot;</span>)                                                    <span class="comment">//add modifier (J for PCRE2_DUPNAMES)</span></div>
<div class="line">  .compile();                                                           <span class="comment">//Finally compile it.</span></div>
<div class="line">      </div>
<div class="line"><span class="comment">//Do not use setModifier() after adding any modifier/s, it will reset them.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//Another way is to use constructor to initialize and compile at the same time:</span></div>
<div class="line"><a class="code" href="classjpcre2_1_1select_1_1Regex.html">jp::Regex</a> re2(<span class="stringliteral">&quot;pattern2&quot;</span>,<span class="stringliteral">&quot;mSi&quot;</span>);  <span class="comment">//S is an optimization mod.</span></div>
<div class="line"><a class="code" href="classjpcre2_1_1select_1_1Regex.html">jp::Regex</a> re3(<span class="stringliteral">&quot;pattern3&quot;</span>, PCRE2_ANCHORED);</div>
<div class="line"><a class="code" href="classjpcre2_1_1select_1_1Regex.html">jp::Regex</a> re4(<span class="stringliteral">&quot;pattern4&quot;</span>, PCRE2_ANCHORED, <a class="code" href="namespacejpcre2.html#a85c143271501e383843f45b9999c2f00a5e8bab7c478015b19baf3e84ed00876e">jpcre2::JIT_COMPILE</a>);</div>
</div><!-- fragment --><p>Now you can perform match or replace against the pattern. Use the <code>RegexMatch::match()</code> function to perform regex match and the <code>RegexReplace::replace()</code> member function to perform regex replace.</p>
<h3><a class="anchor" id="check-regex"></a>
Check if regex compiled successfully</h3>
<p>You can check if the regex was compiled successfully or not, but it's not necessary. A match against a non-compiled regex will give you 0 match and for replace you will be returned the exact same subject string that you passed.</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span>(!re) std::cout&lt;&lt;<span class="stringliteral">&quot;Failed&quot;</span>;</div>
<div class="line"><span class="keywordflow">else</span> std::cout&lt;&lt;<span class="stringliteral">&quot;successfull&quot;</span>;</div>
</div><!-- fragment --><p>The <code>if(re)</code> conditional is only available for <code>&gt;= C++11</code>:</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span>(re) std::cout&lt;&lt;<span class="stringliteral">&quot;Success&quot;</span>;</div>
<div class="line"><span class="keywordflow">else</span> std::cout&lt;&lt;<span class="stringliteral">&quot;Failure&quot;</span>;</div>
</div><!-- fragment --><p>For <code>&lt; C++11</code>, you can use the double bang trick as an alternative to <code>if(re)</code>:</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span>(!!re) std::cout&lt;&lt;<span class="stringliteral">&quot;Success&quot;</span>;</div>
<div class="line"><span class="keywordflow">else</span> std::cout&lt;&lt;<span class="stringliteral">&quot;Failure&quot;</span>;</div>
</div><!-- fragment --><h2><a class="anchor" id="match"></a>
Match</h2>
<p>Match is generally performed using the <code><a class="el" href="classjpcre2_1_1select_1_1RegexMatch.html#a93e461bc1aa7606f161938dc94e9909d" title="Perform match operation using info from class variables and return the match count and store the resu...">jp::RegexMatch::match()</a></code> function.</p>
<p>For convenience, a shortcut function in <code>Regex</code> is available: <code><a class="el" href="classjpcre2_1_1select_1_1Regex.html#a32a4c3d27c1f5e64bf3565e375a39944" title="Perform regex match and return match count using a temporary match object.">jp::Regex::match()</a></code>. It can take upto three arguments. It uses a temporary match object to perform the match.</p>
<p>To get match results, you will need to pass vector pointers that will be filled with match data.</p>
<h3><a class="anchor" id="check-if-a-string-matches-a-regex"></a>
Check if a string matches a regex</h3>
<div class="fragment"><div class="line"><a class="code" href="classjpcre2_1_1select_1_1Regex.html">jp::Regex</a> re(<span class="stringliteral">&quot;\\w+ect&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(re.match(<span class="stringliteral">&quot;I am the subject&quot;</span>)) <span class="comment">//always uses a new temporary match object</span></div>
<div class="line">    std::cout&lt;&lt;<span class="stringliteral">&quot;matched (case sensitive)&quot;</span>;</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">    std::cout&lt;&lt;<span class="stringliteral">&quot;Didn&#39;t match&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">//For case insensitive match, re-compile with modifier &#39;i&#39;</span></div>
<div class="line">re.addModifier(<span class="stringliteral">&quot;i&quot;</span>).compile();</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(re.match(<span class="stringliteral">&quot;I am the subjEct&quot;</span>)) <span class="comment">//always uses a new temporary match object</span></div>
<div class="line">    std::cout&lt;&lt;<span class="stringliteral">&quot;matched (case insensitive)&quot;</span>;</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">    std::cout&lt;&lt;<span class="stringliteral">&quot;Didn&#39;t match&quot;</span>;</div>
</div><!-- fragment --><h3><a class="anchor" id="simple-match-count"></a>
Get match count</h3>
<div class="fragment"><div class="line"><span class="keywordtype">size_t</span> count = <a class="code" href="classjpcre2_1_1select_1_1Regex.html">jp::Regex</a>(<span class="stringliteral">&quot;[aijst]&quot;</span>,<span class="stringliteral">&quot;i&quot;</span>).<a class="code" href="classjpcre2_1_1select_1_1Regex.html#a32a4c3d27c1f5e64bf3565e375a39944">match</a>(<span class="stringliteral">&quot;I am the subject&quot;</span>,<span class="stringliteral">&quot;g&quot;</span>); <span class="comment">//always uses a new temporary match object</span></div>
</div><!-- fragment --><p>The <code>g</code> modifier performs global match.</p>
<h3><a class="anchor" id="do-match"></a>
Get match result</h3>
<p>To get the match results, you need to pass appropriate vector pointers. This is an example of how you can get the numbered substrings/captured groups from a match:</p>
<div class="fragment"><div class="line"><a class="code" href="structjpcre2_1_1select.html#aa0ee995740f7f2c7bd176058e16049a4">jp::VecNum</a> vec_num;</div>
<div class="line"><a class="code" href="classjpcre2_1_1select_1_1RegexMatch.html">jp::RegexMatch</a> rm;</div>
<div class="line"><span class="keywordtype">size_t</span> count=rm.setRegexObject(&amp;re)                          <span class="comment">//set associated Regex object</span></div>
<div class="line">               .setSubject(&amp;subject)                         <span class="comment">//set subject string</span></div>
<div class="line">               .addModifier(ac_mod)                          <span class="comment">//add modifier</span></div>
<div class="line">               .setNumberedSubstringVector(&amp;vec_num)         <span class="comment">//pass pointer to VecNum vector</span></div>
<div class="line">               .match();                                     <span class="comment">//Finally perform the match.</span></div>
<div class="line"><span class="comment">//vec_num will be populated with vectors of numbered substrings.</span></div>
<div class="line"><span class="comment">//count is the total number of matches found</span></div>
</div><!-- fragment --><h3><a class="anchor" id="access-a-capture-group"></a>
Access a captured group</h3>
<p>You can access a substring/captured group by specifying their index (position):</p>
<div class="fragment"><div class="line">std::cout&lt;&lt;vec_num[0][0]; <span class="comment">// group 0 in first match</span></div>
<div class="line">std::cout&lt;&lt;vec_num[0][1]; <span class="comment">// group 1 in first match</span></div>
<div class="line">std::cout&lt;&lt;vec_num[1][0]; <span class="comment">// group 0 in second match</span></div>
</div><!-- fragment --><h3><a class="anchor" id="get-named-capture-group"></a>
Get named capture group</h3>
<p>To get named substring and/or name to number mapping, pass pointer to the appropriate vectors with <code><a class="el" href="classjpcre2_1_1select_1_1RegexMatch.html#aae59dd4438faecd5da9d69919f47494b" title="Set a pointer to the named substring vector.">jp::RegexMatch::setNamedSubstringVector()</a></code> and/or <code><a class="el" href="classjpcre2_1_1select_1_1RegexMatch.html#a2484deb0d3e6b261d9ad8533377d32c1" title="Set a pointer to the name to number map vector.">jp::RegexMatch::setNameToNumberMapVector()</a></code> before doing the match.</p>
<div class="fragment"><div class="line"><a class="code" href="structjpcre2_1_1select.html#aa0ee995740f7f2c7bd176058e16049a4">jp::VecNum</a> vec_num;   </div>
<div class="line"><a class="code" href="structjpcre2_1_1select.html#a756ab2ac6bf47ceb035425d913ef7e99">jp::VecNas</a> vec_nas;   </div>
<div class="line"><a class="code" href="structjpcre2_1_1select.html#aeca273ccccbe7db7d8b38b08c9ea489c">jp::VecNtN</a> vec_ntn;   </div>
<div class="line">std::string ac_mod=<span class="stringliteral">&quot;g&quot;</span>;   <span class="comment">// g is for global match. Equivalent to using setFindAll() or FIND_ALL in addJpcre2Option()</span></div>
<div class="line"><a class="code" href="classjpcre2_1_1select_1_1RegexMatch.html">jp::RegexMatch</a> rm;</div>
<div class="line">rm.setRegexObject(&amp;re)</div>
<div class="line">  .setSubject(&amp;subject)                        <span class="comment">//set subject string</span></div>
<div class="line">  .addModifier(ac_mod)                         <span class="comment">//add modifier</span></div>
<div class="line">  .setNumberedSubstringVector(&amp;vec_num)        <span class="comment">//pass pointer to vector of numbered substring vectors</span></div>
<div class="line">  .setNamedSubstringVector(&amp;vec_nas)           <span class="comment">//pass pointer to vector of named substring maps</span></div>
<div class="line">  .setNameToNumberMapVector(&amp;vec_ntn)          <span class="comment">//pass pointer to vector of name to number maps</span></div>
<div class="line">  .match();                                    <span class="comment">//Finally perform the match()</span></div>
</div><!-- fragment --><h3><a class="anchor" id="access-substring-by-name"></a>
Access a capture group by name</h3>
<div class="fragment"><div class="line">std::cout&lt;&lt;vec_nas[0][<span class="stringliteral">&quot;name&quot;</span>]; <span class="comment">// captured group by name in first match</span></div>
<div class="line">std::cout&lt;&lt;vec_nas[1][<span class="stringliteral">&quot;name&quot;</span>]; <span class="comment">// captured group by name in second match</span></div>
</div><!-- fragment --><h3><a class="anchor" id="get-number-to-name"></a>
Get the position of a capture group name</h3>
<p>If you need this information, you should have passed a <code><a class="el" href="structjpcre2_1_1select.html#aeca273ccccbe7db7d8b38b08c9ea489c" title="Vector of substring name to substring number map.">jp::VecNtN</a></code> pointer to <code><a class="el" href="classjpcre2_1_1select_1_1RegexMatch.html#a2484deb0d3e6b261d9ad8533377d32c1" title="Set a pointer to the name to number map vector.">jp::RegexMatch::setNameToNumberMapVector()</a></code> function before doing the match (<a href="#get-named-capture-group">see above</a>).</p>
<div class="fragment"><div class="line">std::cout&lt;&lt;vec_ntn[0][<span class="stringliteral">&quot;name&quot;</span>]; <span class="comment">// position of captured group &#39;name&#39; in first match</span></div>
</div><!-- fragment --><h3><a class="anchor" id="iterate"></a>
Iterate through match result</h3>
<p>You can iterate through the matches for numbered substrings (<code><a class="el" href="structjpcre2_1_1select.html#aa0ee995740f7f2c7bd176058e16049a4" title="Vector of matches with numbered substrings.">jp::VecNum</a></code>) like this:</p>
<div class="fragment"><div class="line"><span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i=0;i&lt;vec_num.size();++i){</div>
<div class="line">    <span class="comment">//i=0 is the first match found, i=1 is the second and so forth</span></div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> j=0;j&lt;vec_num[i].size();++j){</div>
<div class="line">        <span class="comment">//j=0 is the capture group 0 i.e the total match</span></div>
<div class="line">        <span class="comment">//j=1 is the capture group 1 and so forth.</span></div>
<div class="line">        std::cout&lt;&lt;<span class="stringliteral">&quot;\n\t&quot;</span>&lt;&lt;j&lt;&lt;<span class="stringliteral">&quot;: &quot;</span>&lt;&lt;vec_num[i][j]&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>You can iterate through named substrings (<code><a class="el" href="structjpcre2_1_1select.html#a756ab2ac6bf47ceb035425d913ef7e99" title="Vector of matches with named substrings.">jp::VecNas</a></code>) like this:</p>
<div class="fragment"><div class="line"><span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i=0;i&lt;vec_nas.size();++i){</div>
<div class="line">    <span class="comment">//i=0 is the first match found, i=1 is the second and so forth</span></div>
<div class="line">    <span class="keywordflow">for</span>(jp::MapNas::iterator ent=vec_nas[i].begin();ent!=vec_nas[i].end();++ent){</div>
<div class="line">        <span class="comment">//ent-&gt;first is the number/position of substring found</span></div>
<div class="line">        <span class="comment">//ent-&gt;second is the substring itself</span></div>
<div class="line">        <span class="comment">//when ent-&gt;first is 0, ent-&gt;second is the total match.</span></div>
<div class="line">        std::cout&lt;&lt;<span class="stringliteral">&quot;\n\t&quot;</span>&lt;&lt;ent-&gt;first&lt;&lt;<span class="stringliteral">&quot;: &quot;</span>&lt;&lt;ent-&gt;second&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>If you are using <code>&gt;=C++11</code>, you can make the loop a lot simpler:</p>
<div class="fragment"><div class="line"><span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i=0;i&lt;vec_nas.size();++i){</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keyword">auto</span> <span class="keyword">const</span>&amp; ent : vec_nas[i]){</div>
<div class="line">        std::cout&lt;&lt;<span class="stringliteral">&quot;\n\t&quot;</span>&lt;&lt;ent.first&lt;&lt;<span class="stringliteral">&quot;: &quot;</span>&lt;&lt;ent.second&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p><code><a class="el" href="structjpcre2_1_1select.html#aeca273ccccbe7db7d8b38b08c9ea489c" title="Vector of substring name to substring number map.">jp::VecNtN</a></code> can be iterated through the same way as <code><a class="el" href="structjpcre2_1_1select.html#a756ab2ac6bf47ceb035425d913ef7e99" title="Vector of matches with named substrings.">jp::VecNas</a></code>.</p>
<h3><a class="anchor" id="independent-match-object"></a>
RegexMatch object</h3>
<p>Every match object needs to be associated with a Regex object. A match object without regex object associated with it, will always give 0 match.</p>
<div class="fragment"><div class="line"><a class="code" href="classjpcre2_1_1select_1_1RegexMatch.html">jp::RegexMatch</a> rm;</div>
<div class="line">rm.setRegexObject(&amp;re);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Another way is to use constructor</span></div>
<div class="line"><a class="code" href="classjpcre2_1_1select_1_1RegexMatch.html">jp::RegexMatch</a> rm1(&amp;re);</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">size_t</span> count = rm.setSubject(<span class="stringliteral">&quot;subject&quot;</span>)</div>
<div class="line">                 .setModifier(<span class="stringliteral">&quot;g&quot;</span>)</div>
<div class="line">                 .match();</div>
</div><!-- fragment --><p>The <code>RegexMatch</code> class stores a pointer to its' associated Regex object. If the content of the associated Regex object is changed, it will be reflected on the next operation/result.</p>
<h2><a class="anchor" id="replace"></a>
Replace or Substitute</h2>
<p>Regex replace is generally performed using the <code><a class="el" href="classjpcre2_1_1select_1_1RegexReplace.html#afbd99cc287436226e3510b71ba21eb8a" title="Perform regex replace by retrieving subject string, replacement string, modifier and other options fr...">jp::RegexReplace::replace()</a></code> function.</p>
<p>However, a convenience shortcut function is available in Regex class: <code>jp::Regex::replace(subject, replacewith, modifier)</code>. It uses a temporary replace object to perform the replacement.</p>
<h3><a class="anchor" id="simple-replace"></a>
Simple replacement</h3>
<div class="fragment"><div class="line"><span class="comment">//Using a temporary regex object</span></div>
<div class="line">std::cout&lt;&lt;<a class="code" href="classjpcre2_1_1select_1_1Regex.html">jp::Regex</a>(<span class="stringliteral">&quot;\\d+&quot;</span>).<a class="code" href="classjpcre2_1_1select_1_1Regex.html#a6cf544defa7a782ea221f190cb3ebef9">replace</a>(<span class="stringliteral">&quot;I am digits 1234 0000&quot;</span>,<span class="stringliteral">&quot;5678&quot;</span>, <span class="stringliteral">&quot;g&quot;</span>);</div>
<div class="line"><span class="comment">//&#39;g&#39; modifier is for global replacement</span></div>
<div class="line"><span class="comment">//1234 and 0000 gets replaced with 5678</span></div>
</div><!-- fragment --><h3><a class="anchor" id="using-method-chain"></a>
Using method chain</h3>
<div class="fragment"><div class="line"><a class="code" href="classjpcre2_1_1select_1_1RegexReplace.html">jp::RegexReplace</a> rr;</div>
<div class="line">std::cout&lt;&lt;</div>
<div class="line">rr.setRegexObject(&amp;re)  <span class="comment">//set associated Regex object</span></div>
<div class="line">  .setSubject(&amp;s)       <span class="comment">//Set various parameters</span></div>
<div class="line">  .setReplaceWith(&amp;s2)  <span class="comment">//...</span></div>
<div class="line">  .addModifier(<span class="stringliteral">&quot;gE&quot;</span>)    <span class="comment">//...</span></div>
<div class="line">  .addJpcre2Option(0)   <span class="comment">//...</span></div>
<div class="line">  .addPcre2Option(0)    <span class="comment">//...</span></div>
<div class="line">  .replace();           <span class="comment">//Finally do the replacement.</span></div>
<div class="line"><span class="comment">//gE is the modifier passed (global and unknown-unset-empty).</span></div>
<div class="line"><span class="comment">//Access substrings/captured groups with ${1234},$1234 (for numbered substrings)</span></div>
<div class="line"><span class="comment">// or ${name} (for named substrings) in the replacement part i.e in setReplaceWith()</span></div>
</div><!-- fragment --><h3><a class="anchor" id="independent-replace-object"></a>
RegexReplace object</h3>
<p>Every replace object needs to be associated with a Regex object. A replace object not associated with any Regex object will perform no replacement and return the same subject string that was given.</p>
<div class="fragment"><div class="line"><a class="code" href="classjpcre2_1_1select_1_1RegexReplace.html">jp::RegexReplace</a> rr;</div>
<div class="line">rr.setRegexObject(&amp;re);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Another way is to use constructor</span></div>
<div class="line"><a class="code" href="classjpcre2_1_1select_1_1RegexReplace.html">jp::RegexReplace</a> rr1(&amp;re);</div>
<div class="line"> </div>
<div class="line">rr.setSubject(<span class="stringliteral">&quot;subjEct&quot;</span>)</div>
<div class="line">  .setReplaceWith(<span class="stringliteral">&quot;me&quot;</span>)</div>
<div class="line">  .setModifier(<span class="stringliteral">&quot;g&quot;</span>)</div>
<div class="line">  .replace();</div>
</div><!-- fragment --><p>The <code>RegexReplace</code> class stores a pointer to its' associated Regex object. If the content of the associated Regex object is changed, it will be reflected on the next operation/result.</p>
<h3><a class="anchor" id="matchevaluator"></a>
MatchEvaluator</h3>
<p>The <code>jp::RegexReplace</code> class has two replace functions: <code><a class="el" href="classjpcre2_1_1select_1_1RegexReplace.html#afbd99cc287436226e3510b71ba21eb8a" title="Perform regex replace by retrieving subject string, replacement string, modifier and other options fr...">jp::RegexReplace::replace()</a></code> and <code><a class="el" href="classjpcre2_1_1select_1_1RegexReplace.html#af0ddcee0637a9d0c5d526f3f63279f0d" title="JPCRE2 native replace function.">jp::RegexReplace::nreplace()</a></code>. Both of them can take a <code>jp::MatchEvaluator</code> instance as argument and perform the replace operation according to the callback function set in the MatchEvaluator class.</p>
<p>And those two are just wrappers of <code><a class="el" href="classjpcre2_1_1select_1_1MatchEvaluator.html#a29142363d2a96ffa7d0f87737b2a6c81" title="PCRE2 compatible replace function that uses this MatchEvaluator.">jp::MatchEvaluator::replace()</a></code> and <code><a class="el" href="classjpcre2_1_1select_1_1MatchEvaluator.html#acacf66fad74770804ea06bb7125c7098" title="Perform regex replace with this match evaluator.">jp::MatchEvaluator::nreplace()</a></code>. Using these functions directly, one can re-use existing match data for new replacement operation without doing the match again. Though, this facility comes with some quirks, <a href="#re-use-match-data">see Re-use match data section.</a>. By default all replace functions do a new match every time and re-create the match data.</p>
<p>The first function mentioned (<code>replace()</code>) above, is for PCRE2 compatible replacement which uses <code>pcre2_substitute</code> to process the replacement string returned by the callback function, where the second one (<code>nreplace()</code>) uses a native approach without using <code>pcre2_substitute</code> which treats the string returned by the callback function as literal.</p>
<p>The class <code>MatchEvaluator</code> implements several constructor overloads to take different callback functions. Also, there are setter functions which allow changing the callback functions if desired.</p>
<p>The callback function takes exactly three positional arguments. If you don't need one or more arguments, you may pass <code>void*</code> in their respective positions in the argument list.</p>
<h4><a class="anchor" id="simple-example"></a>
Simple example</h4>
<p>The callback function: </p><div class="fragment"><div class="line"><a class="code" href="structjpcre2_1_1select.html#a8c6e2d3cb5fb2892aba03f9f8b8093f3">jp::String</a> callback1(<span class="keyword">const</span> <a class="code" href="structjpcre2_1_1select.html#a148af15b9e24f1fef5ba2ad611428535">jp::NumSub</a>&amp; m1, <span class="keywordtype">void</span>*, <span class="keywordtype">void</span>*){</div>
<div class="line">    <span class="keywordflow">return</span> <span class="stringliteral">&quot;(&quot;</span>+m1[0]+<span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><p>then, </p><div class="fragment"><div class="line"><a class="code" href="classjpcre2_1_1select_1_1Regex.html">jp::Regex</a> re(<span class="stringliteral">&quot;(?&lt;total&gt;\\w+)&quot;</span>, <span class="stringliteral">&quot;n&quot;</span>);</div>
<div class="line"><a class="code" href="classjpcre2_1_1select_1_1RegexReplace.html">jp::RegexReplace</a> rr;</div>
<div class="line">String s3 = <span class="stringliteral">&quot;I am a string 879879 fdsjkll ১ ২ ৩ ৪ অ আ ক খ গ ঘ&quot;</span>;</div>
<div class="line"> </div>
<div class="line">rr.setRegexObject(&amp;re)</div>
<div class="line">  .setSubject(&amp;s3)</div>
<div class="line">  .setModifier(<span class="stringliteral">&quot;g&quot;</span>);</div>
<div class="line">  </div>
<div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;Result:\n&quot;</span>&lt;&lt;</div>
<div class="line">    rr.nreplace(<a class="code" href="classjpcre2_1_1select_1_1MatchEvaluator.html">jp::MatchEvaluator</a>(callback1)); <span class="comment">//replace() function can take the same argument</span></div>
</div><!-- fragment --><p>Detailed examples are in the <a class="el" href="testme_8cpp.html">testme.cpp</a> file.</p>
<h4><a class="anchor" id="matchevaluator-with-lambda"></a>
MatchEvaluator with lambda</h4>
<div class="fragment"><div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;Result:\n&quot;</span>&lt;&lt;</div>
<div class="line">    rr.nreplace(<a class="code" href="classjpcre2_1_1select_1_1MatchEvaluator.html">jp::MatchEvaluator</a></div>
<div class="line">               (</div>
<div class="line">                 [](<span class="keyword">const</span> <a class="code" href="structjpcre2_1_1select.html#a148af15b9e24f1fef5ba2ad611428535">jp::NumSub</a>&amp; m1, <span class="keyword">const</span> <a class="code" href="structjpcre2_1_1select.html#a019a853fe67b764775558db63fb9749d">jp::MapNas</a>&amp; m2, <span class="keywordtype">void</span>*){</div>
<div class="line">                    <span class="keywordflow">return</span> <span class="stringliteral">&quot;(&quot;</span>+m1[0]+<span class="stringliteral">&quot;/&quot;</span>+m2.at(<span class="stringliteral">&quot;total&quot;</span>)+<span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line">                 }</div>
<div class="line">               ));</div>
<div class="line"><span class="comment">//replace() function can take the same argument</span></div>
</div><!-- fragment --><h4><a class="anchor" id="matchevaluator-only"></a>
MatchEvaluator only</h4>
<p>Replacement can be done with only MatchEvaluator:</p>
<div class="fragment"><div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;Result:\n&quot;</span>&lt;&lt;</div>
<div class="line"><a class="code" href="classjpcre2_1_1select_1_1MatchEvaluator.html">jp::MatchEvaluator</a>(callback1).<a class="code" href="classjpcre2_1_1select_1_1MatchEvaluator.html#a217a3076e370f2da91aa927ebd4b5bb8">setSubject</a>(&amp;s3)</div>
<div class="line">                             .<a class="code" href="classjpcre2_1_1select_1_1MatchEvaluator.html#ac1301db830e8c52f39f7e78256da4fdd">setRegexObject</a>(&amp;re)</div>
<div class="line">                             .<a class="code" href="classjpcre2_1_1select_1_1MatchEvaluator.html#a2f5019178812d44015051a097260f51a">setModifier</a>(<span class="stringliteral">&quot;g&quot;</span>)</div>
<div class="line">                             .<a class="code" href="classjpcre2_1_1select_1_1MatchEvaluator.html#acacf66fad74770804ea06bb7125c7098">nreplace</a>();</div>
<div class="line"><span class="comment">//replace() function can take the same argument</span></div>
</div><!-- fragment --><h4><a class="anchor" id="matchevaluator-object"></a>
MatchEvaluator object</h4>
<p>A <code>MatchEvaluator</code> object can be created using one of its many constructors. Callback functions can be provided with the constructors or can be changed later with <code><a class="el" href="classjpcre2_1_1select_1_1MatchEvaluator.html#a84cfe137832d29c9604d86cda6db2cf0" title="Member function to set a callback function with no vector reference.">jp::MatchEvaluator::setCallback()</a></code> function. If no callback function is set/given, then the default callback function is <code><a class="el" href="structjpcre2_1_1select_1_1callback.html#a51c62af06e6b2ea5f9125befdb1e5727" title="Callback function that removes the matched part/s in the subject string and does not take any match v...">jp::callback::erase()</a></code> which deletes matched part/s from the subject string.</p>
<div class="fragment"><div class="line"><a class="code" href="classjpcre2_1_1select_1_1MatchEvaluator.html">jp::MatchEvaluator</a> me; <span class="comment">//default callback jp::callback::erase</span></div>
<div class="line">me.setRegexObject(&amp;re).setSubject(&amp;sub).nreplace(); <span class="comment">//this will remove matched parts from sub.</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="classjpcre2_1_1select_1_1MatchEvaluator.html">jp::MatchEvaluator</a> me1(callback1); <span class="comment">//arbitrary callback function.</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="classjpcre2_1_1select_1_1MatchEvaluator.html">jp::MatchEvaluator</a> me2(&amp;re); <span class="comment">//default callback jp::callback::erase</span></div>
<div class="line">me2.<a class="code" href="classjpcre2_1_1select_1_1MatchEvaluator.html#a217a3076e370f2da91aa927ebd4b5bb8">setSubject</a>(sub).<a class="code" href="classjpcre2_1_1select_1_1MatchEvaluator.html#acacf66fad74770804ea06bb7125c7098">nreplace</a>(); <span class="comment">//this will remove matched parts from sub.</span></div>
</div><!-- fragment --><h4><a class="anchor" id="re-use-match-data"></a>
Re-use match data</h4>
<p>It is possible to use existing match data to perform replacement without performing a new match operation.</p>
<p><b>Safest way but not the best:</b></p>
<div class="fragment"><div class="line"><a class="code" href="classjpcre2_1_1select_1_1MatchEvaluator.html">jp::MatchEvaluator</a> me(<a class="code" href="structjpcre2_1_1select_1_1callback.html#af00ff195ee7c01599a9f73d3cac96b7f">jp::callback::fill</a>); <span class="comment">//this callback implements all vectors and does not modify subject string.</span></div>
<div class="line"><span class="comment">//Now you need to populate the vectors with match data:</span></div>
<div class="line">me.setSubject(&amp;sub).setRegexObject(&amp;re).match();</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Now that we have all the match data we need, we can use it to perform replacement according to</span></div>
<div class="line"><span class="comment">//different callback functions:</span></div>
<div class="line">me.setCallback(callback2).nreplace(<span class="keyword">false</span>); <span class="comment">//&#39;false&#39; tells nreplace() to not perform new match.</span></div>
<div class="line">me.setCallback(callback3).nreplace(<span class="keyword">false</span>);</div>
<div class="line"><span class="comment">//etc..</span></div>
</div><!-- fragment --><p><b>Best but not the safest:</b></p>
<p>Instead of creating data for all vectors, you can do it as necessary, but it requires you to be vigilant about what you are doing:</p>
<div class="fragment"><div class="line"><a class="code" href="classjpcre2_1_1select_1_1MatchEvaluator.html">jp::MatchEvaluator</a> me; <span class="comment">//no vector with jp::callback::erase callback</span></div>
<div class="line">me.setSubject(sub).setRegexObject(&amp;re); <span class="comment">//no data yet.</span></div>
</div><!-- fragment --><p>Let's say, we have a callback <code>cb3</code> that implements NumSub and MapNas and we do this:</p>
<div class="fragment"><div class="line">me.setCallback(cb3).nreplace(); </div>
<div class="line"><span class="comment">//this creates match data for NumSub and MapNas and performs the replacement.</span></div>
</div><!-- fragment --><p>Now, if we want to perform the replacement with a different callback function <code>cb2</code> which implements only MapNas or NumSub or both, we can re-use the data created above:</p>
<div class="fragment"><div class="line">me.setCallback(cb2).nreplace(<span class="keyword">false</span>);</div>
</div><!-- fragment --><p>If we want to use a callback function <code>cb4</code> which implements <code><a class="el" href="structjpcre2_1_1select.html#a673968f656e37a0970288d6e7734f471" title="Substring name to Substring number map.">jp::MapNtN</a></code>, we can not re-use the existing data because there is no data for <code><a class="el" href="structjpcre2_1_1select.html#a9bf3ad3843b42e6f0693ee2063995b92" title="Allow spelling mistake of MapNtN as MapNtn.">jp::MapNtn</a></code> yet. (it will give assertion error if we try). Thus we will need to do the match again:</p>
<div class="fragment"><div class="line">me.setCallback(cb4).nreplace(); <span class="comment">//creating data again and performing replacement.</span></div>
</div><!-- fragment --><p>After the above operation, all the vectors are filled with data (missing <code><a class="el" href="structjpcre2_1_1select.html#a9bf3ad3843b42e6f0693ee2063995b92" title="Allow spelling mistake of MapNtN as MapNtn.">jp::MapNtn</a></code> was created), consequently, we can use any callback function we want at this stage because we have all the data that we will need.</p>
<p>Thus a callback <code>cb7</code> that implements all match data vectors can be used without doing the match again: </p><div class="fragment"><div class="line">me.setCallback(cb7).nreplace(<span class="keyword">false</span>); <span class="comment">//OK, as we have all the data we need.</span></div>
</div><!-- fragment --><p><b>Quirks:</b></p>
<ol type="1">
<li>Changes in replace related option takes effect without a re-match.</li>
<li>Changes in match related option (e.g start offset) needs a re-match to take effect.</li>
<li>To re-use existing match data, callback function must be compatible with the data, otherwise it's an assertion failure.</li>
<li>If the associated Regex object or subject string changes, a new match must be performed, trying to use the existing match data in such cases is undefined behavior.</li>
</ol>
<p><b>Make sure you at least understand the #3 and #4 points above before going for practical implementation of re-using match data. see <a class="el" href="classjpcre2_1_1select_1_1MatchEvaluator.html" title="This class inherits RegexMatch and provides a similar functionality.">jpcre2::select::MatchEvaluator</a> for details</b></p>
<h1><a class="anchor" id="modifiers"></a>
Modifiers</h1>
<p><b>JPCRE2</b> uses a default set of modifier to provide an easy path to setting different options for different operations. There are three basic operations, namely compile, match and replace and thus the set is divided into three subset of modifiers. For convenience, we call them modifier tables.</p>
<p>If the default modifier table is not suitable for your application, you may use a custom modifier table instead of the default one. The <code><a class="el" href="classjpcre2_1_1ModifierTable.html" title="Lets you create custom modifier tables.">jpcre2::ModifierTable</a></code> class provides this interface. (note the namespace, it's directly under <code><a class="el" href="namespacejpcre2.html">jpcre2</a></code>).</p>
<blockquote class="doxtable">
<p>All modifier strings are parsed and converted to equivalent PCRE2 and JPCRE2 options on the fly. If you don't want it to spend any time parsing modifier then pass the equivalent option directly with one of the many variants of <code>addJpcre2Option()</code> and <code>addPcre2Option()</code> functions. </p>
</blockquote>
<p><b>Types of modifiers:</b></p>
<ol type="1">
<li>Compile modifier</li>
<li>Match modifier</li>
<li>Replace modifier</li>
</ol>
<p>All of the modifiers above can be divided further into two categories:</p>
<ol type="1">
<li>Unique modifier</li>
<li>Combined or mixed modifier (e.g 'n', 'E')</li>
</ol>
<h2><a class="anchor" id="compile-modifier"></a>
Default Compile modifiers</h2>
<p>These modifiers define the behavior of a regex pattern (they are integrated in the compiled regex). They have more or less the same meaning as the <a href="https://php.net/manual/en/reference.pcre.pattern.modifiers.php">PHP regex modifiers</a> except for <code>e, j and n</code> (marked with <sup>*</sup>).</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Modifier </th><th class="markdownTableHeadNone">Details  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>e</code><sup>*</sup> </td><td class="markdownTableBodyNone">Unset back-references in the pattern will match to empty strings. Equivalent to <code>PCRE2_MATCH_UNSET_BACKREF</code>.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>i</code> </td><td class="markdownTableBodyNone">Case-insensitive. Equivalent to <code>PCRE2_CASELESS</code> option.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>j</code><sup>*</sup> </td><td class="markdownTableBodyNone"><code>\u \U \x</code> and unset back-references will act as JavaScript standard. Equivalent to PCRE2_ALT_BSUX | PCRE2_MATCH_UNSET_BACKREF. <ul>
<li>
<code>\U</code> matches an upper case "U" character (by default it causes a compile error if this option is not set).</li>
<li>
<code>\u</code> matches a lower case "u" character unless it is followed by four hexadecimal digits, in which case the hexadecimal number defines the code point to match (by default it causes a compile error if this option is not set).</li>
<li>
<code>\x</code> matches a lower case "x" character unless it is followed by two hexadecimal digits, in which case the hexadecimal number defines the code point to match (By default, as in Perl, a hexadecimal number is always expected after <code>\x</code>, but it may have zero, one, or two digits (so, for example, <code>\xz</code> matches a binary zero character followed by z) ).</li>
<li>
Unset back-references in the pattern will match to empty strings.</li>
</ul>
</td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>m</code> </td><td class="markdownTableBodyNone">Multi-line regex. Equivalent to <code>PCRE2_MULTILINE</code> option.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>n</code><sup>*</sup> </td><td class="markdownTableBodyNone">Enable Unicode support for <code>\w \d</code> etc... in pattern. Equivalent to PCRE2_UTF | PCRE2_UCP.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>s</code> </td><td class="markdownTableBodyNone">If this modifier is set, a dot meta-character in the pattern matches all characters, including newlines. Equivalent to <code>PCRE2_DOTALL</code> option.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>u</code> </td><td class="markdownTableBodyNone">Enable UTF support.Treat pattern and subjects as UTF strings. It is equivalent to <code>PCRE2_UTF</code> option.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>x</code> </td><td class="markdownTableBodyNone">Whitespace data characters in the pattern are totally ignored except when escaped or inside a character class, enables commentary in pattern. Equivalent to <code>PCRE2_EXTENDED</code> option.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>A</code> </td><td class="markdownTableBodyNone">Match only at the first position. It is equivalent to <code>PCRE2_ANCHORED</code> option.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>D</code> </td><td class="markdownTableBodyNone">A dollar meta-character in the pattern matches only at the end of the subject string. Without this modifier, a dollar also matches immediately before the final character if it is a newline (but not before any other newlines). This modifier is ignored if <code>m</code> modifier is set. Equivalent to <code>PCRE2_DOLLAR_ENDONLY</code> option.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>J</code> </td><td class="markdownTableBodyNone">Allow duplicate names for sub-patterns. Equivalent to <code>PCRE2_DUPNAMES</code> option.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>S</code> </td><td class="markdownTableBodyNone">When a pattern is going to be used several times, it is worth spending more time analyzing it in order to speed up the time taken for matching/replacing. It may also be beneficial for a very long subject string or pattern. Equivalent to an extra compilation with JIT_COMPILER with the option <code>PCRE2_JIT_COMPLETE</code>.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>U</code> </td><td class="markdownTableBodyNone">This modifier inverts the "greediness" of the quantifiers so that they are not greedy by default, but become greedy if followed by <code>?</code>. Equivalent to <code>PCRE2_UNGREEDY</code> option.  </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md6"></a>
Default Replace or Match modifiers</h2>
<p>These modifiers are not compiled in the regex itself, rather they are used per call of each match or replace function.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Modifier </th><th class="markdownTableHeadNone">Action </th><th class="markdownTableHeadNone">Details  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>A</code> </td><td class="markdownTableBodyNone">match </td><td class="markdownTableBodyNone">Match at start. Equivalent to <code>PCRE2_ANCHORED</code>. Can be used in match operation. Setting this option only at match time (i.e regex was not compiled with this option) will disable optimization during match time.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>e</code> </td><td class="markdownTableBodyNone">replace </td><td class="markdownTableBodyNone">Replaces unset group with empty string. Equivalent to <code>PCRE2_SUBSTITUTE_UNSET_EMPTY</code>.  </td></tr>
</table>
<p><code>E</code> | replace | Extension of <code>e</code> modifier. Sets even unknown groups to empty string. Equivalent to <code>PCRE2_SUBSTITUTE_UNSET_EMPTY | PCRE2_SUBSTITUTE_UNKNOWN_UNSET</code> <code>g</code> | match<br  />
replace | Global. Will perform global matching or replacement if passed. Equivalent to <code><a class="el" href="namespacejpcre2.html#a85c143271501e383843f45b9999c2f00af29fccdb263520155e9c25a826a7200c" title="Find all during match (global match)">jpcre2::FIND_ALL</a></code> for match and <code>PCRE2_SUBSTITUTE_GLOBAL</code> for replace. <code>x</code> | replace | Extended replacement operation. Equivalent to <code>PCRE2_SUBSTITUTE_EXTENDED</code>. It enables some Bash like features:<br  />
<code>${&lt;n&gt;:-&lt;string&gt;}</code><br  />
<code>${&lt;n&gt;:+&lt;string1&gt;:&lt;string2&gt;}</code><br  />
<code>&lt;n&gt;</code> may be a group number or a name. The first form specifies a default value. If group <code>&lt;n&gt;</code> is set, its value is inserted; if not, <code>&lt;string&gt;</code> is expanded and the result is inserted. The second form specifies strings that are expanded and inserted when group <code>&lt;n&gt;</code> is set or unset, respectively. The first form is just a convenient shorthand for <code>${&lt;n&gt;:+${&lt;n&gt;}:&lt;string&gt;}</code>.</p>
<h2><a class="anchor" id="modifier-table"></a>
Modifier table</h2>
<p>Modifier table is an instance of the <code><a class="el" href="classjpcre2_1_1ModifierTable.html" title="Lets you create custom modifier tables.">jpcre2::ModifierTable</a></code> class. You can bind this table with any of the compile, match and replace related class objects. Different objects can have different tables.</p>
<p>Examples:</p>
<div class="fragment"><div class="line">        <span class="comment">/* ***************************</span></div>
<div class="line"><span class="comment">         * Compile modifier table </span></div>
<div class="line"><span class="comment">         * ***************************/</span></div>
<div class="line">             </div>
<div class="line"><span class="comment">//character table is either std::string or const char* (not jp::String)</span></div>
<div class="line">std::string nametab = <span class="stringliteral">&quot;IJMS&quot;</span>; <span class="comment">//arbitrary modifier characters.</span></div>
<div class="line"><span class="comment">//now the option values sequentially</span></div>
<div class="line"><a class="code" href="namespacejpcre2.html#a078242d38221a13fb3543b9edd78c099">jpcre2::Uint</a> valtab[] = { PCRE2_CASELESS, PCRE2_DUPNAMES, PCRE2_MULTILINE, <a class="code" href="namespacejpcre2.html#a85c143271501e383843f45b9999c2f00a5e8bab7c478015b19baf3e84ed00876e">jpcre2::JIT_COMPILE</a> };</div>
<div class="line"><span class="comment">//if the above two doesn&#39;t have the same number of elements, the behavior is undefined.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//init ModifierTable</span></div>
<div class="line"><a class="code" href="classjpcre2_1_1ModifierTable.html">jpcre2::ModifierTable</a> mdt; <span class="comment">//creates empty table.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//change the Compile modifier table only:</span></div>
<div class="line">mdt.<a class="code" href="classjpcre2_1_1ModifierTable.html#ab3e9c9242d07e9572afc66d12c892ff3">setCompileModifierTable</a>(nametab, valtab);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//now bind the table with the object</span></div>
<div class="line"><a class="code" href="classjpcre2_1_1select_1_1Regex.html">jp::Regex</a> re;</div>
<div class="line">re.setModifierTable(&amp;mdt);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//let&#39;s perform a compile</span></div>
<div class="line">re.compile(<span class="stringliteral">&quot;JPCRE2&quot;</span>,<span class="stringliteral">&quot;I&quot;</span>); <span class="comment">//now I is PCRE2_CASELESS and small &#39;i&#39; is an invalid modifier.</span></div>
</div><!-- fragment --><p>For details, see the <code><a class="el" href="testmd_8cpp.html">testmd.cpp</a></code> file.</p>
<h1><a class="anchor" id="options"></a>
Options</h1>
<p>JPCRE2 allows both PCRE2 and native JPCRE2 options to be passed. PCRE2 options are recognized by the PCRE2 library itself.</p>
<h2><a class="anchor" id="jpcre-options"></a>
JPCRE2 options</h2>
<p>These options are meaningful only for the <b>JPCRE2</b> library, not the original <b>PCRE2</b> library. We use the <code><a class="el" href="classjpcre2_1_1select_1_1Regex.html#a5e2c0464c6ae4d39b80dc5bd226fc7cc" title="Add option to existing JPCRE2 options for compile.">jp::Regex::addJpcre2Option()</a></code> family of functions to pass these options.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Option </th><th class="markdownTableHeadNone">Details  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="namespacejpcre2.html#a85c143271501e383843f45b9999c2f00aecf4a781b081ff541006fbe84e143fb9" title="Option 0 (zero)">jpcre2::NONE</a></code> </td><td class="markdownTableBodyNone">This is the default option. Equivalent to 0 (zero).  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="namespacejpcre2.html#a85c143271501e383843f45b9999c2f00af29fccdb263520155e9c25a826a7200c" title="Find all during match (global match)">jpcre2::FIND_ALL</a></code> </td><td class="markdownTableBodyNone">This option will do a global match if passed during matching. The same can be achieved by passing the 'g' modifier with <code><a class="el" href="classjpcre2_1_1select_1_1RegexMatch.html#a3b596ecf0bd76994eac0cff42e6320b2" title="Parse modifier string and add equivalent PCRE2 and JPCRE2 options.">jp::RegexMatch::addModifier()</a></code> function.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="namespacejpcre2.html#a85c143271501e383843f45b9999c2f00a5e8bab7c478015b19baf3e84ed00876e" title="Perform JIT compilation for optimization.">jpcre2::JIT_COMPILE</a></code> </td><td class="markdownTableBodyNone">This is same as passing the <code>S</code> modifier during pattern compilation.  </td></tr>
</table>
<h2><a class="anchor" id="pcre2-options"></a>
PCRE2 options</h2>
<p>We use the <code><a class="el" href="classjpcre2_1_1select_1_1Regex.html#ac8e7afcee44d6cecd19f2db876a3a9df" title="Add option to existing PCRE2 options for compile.">jp::Regex::addPcre2Option()</a></code> family of functions to pass the PCRE2 options. These options are the same as the PCRE2 library and have the same meaning. For example instead of passing the 'g' modifier to the replacement operation we can also pass its PCRE2 equivalent <code>PCRE2_SUBSTITUTE_GLOBAL</code> to have the same effect. Passing these options directly will be faster than passing modifiers.</p>
<h1><a class="anchor" id="jpcre2-vs-pcre2-spec"></a>
JPCRE2 vs PCRE2 spec</h1>
<p>This is where deviations from the PCRE2 specification will be laid out.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Details </th><th class="markdownTableHeadNone">PCRE2 </th><th class="markdownTableHeadNone">JPCRE2  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Different name for same group </td><td class="markdownTableBodyNone">not supported (<code>10.21</code>) </td><td class="markdownTableBodyNone">supported (<code>&gt;=10.30.01</code>)  </td></tr>
</table>
<h1><a class="anchor" id="code-unit-and-character-type"></a>
Code unit width &amp; character type</h1>
<p>The bit size of character type must match with the PCRE2 library you are linking against. There are three PCRE2 libraries according to code unit width, namely 8, 16 and 32 bit libraries. So, if you use a character type (e.g <code>char</code> which is generally 8 bit) of 8-bit code unit width then you will have to link your program against the 8-bit PCRE2 library. If it's 16-bit character, you will need 16-bit library. If you use a combination of various code unit width supported or use all of them, you will have to link your program against their corresponding PCRE2 libraries. Missing library will yield to compile time error.</p>
<p><b>Implementation defined behavior:</b></p>
<p>Size of integral types (<code>char</code>, <code>wchar_t</code>, <code>char16_t</code>, <code>char32_t</code>) is implementation defined. <code>char</code> may be 8, 16, 32 or 64 (not supported) bit. Same goes for <code>wchar_t</code> and others. In Linux <code>wchar_t</code> is 32 bit and in windows it's 16 bit.</p>
<h1><a class="anchor" id="portable-coding"></a>
Portable coding</h1>
<h2><a class="anchor" id="code-unit-width-quirk"></a>
Code unit width quirk</h2>
<p>JPCRE2 codes are portable in regards of code unit width. Your program gets compiled according to the code unit width defined by your system. Consider the following example, where you do:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="jpcre2_8hpp.html">jpcre2.hpp</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <a class="code" href="structjpcre2_1_1select.html">jpcre2::select&lt;char&gt;</a> <a class="code" href="structjpcre2_1_1select.html">jp</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(){</div>
<div class="line">    <a class="code" href="classjpcre2_1_1select_1_1Regex.html">jp::Regex</a> re;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><p>This is what will happen when you compile:</p>
<ol type="1">
<li>In a system where <code>char</code> is 8 bit, it will use 8-bit library and UTF-8 in UTF-mode.</li>
<li>In a system where <code>char</code> is 16 bit, it will use 16-bit library and UTF-16 in UTF-mode.</li>
<li>In a system where <code>char</code> is 32 bit, it will use 32-bit library and UTF-32 in UTF-mode.</li>
<li>In a system where <code>char</code> is not 8 or 16 or 32 bit, it will yield compile error.</li>
</ol>
<p>If you don't want to be so aware of the code unit width of the character type/s you are using, link your program against all PCRE2 libraries. The code unit width will be handled automatically and if anything unsupported is encountered, you will get compile time error.</p>
<p>A common example in this regard can be the use of <code>wchar_t</code>:</p>
<div class="fragment"><div class="line"><a class="code" href="classjpcre2_1_1select_1_1Regex.html">jpcre2::select&lt;wchar_t&gt;::Regex</a> re;</div>
</div><!-- fragment --><ol type="1">
<li>In windows, the above code will use 16-bit library and UTF-16 in UTF mode.</li>
<li>In Linux, the above code will use 32-bit library and UTF-32 in UTF mode.</li>
</ol>
<h2><a class="anchor" id="use-of-string-class"></a>
Use of string class</h2>
<p>For portable code, instead of using the standard names <code>std::string</code> or such, use <code><a class="el" href="structjpcre2_1_1select.html#a8c6e2d3cb5fb2892aba03f9f8b8093f3" title="Typedef for string (std::string, std::wstring, std::u16string, std::u32string).">jp::String</a></code> (you may further typedef it as <code>String</code> or whatever). It will be defined to an appropriate string class according to the basic character type you selected and thus provide all the functionalities and conveniences you get with <code>std::string</code> and such string classes. Being said that, there's no harm if you use the standard names (<code>std::string</code> etc...). Using <code><a class="el" href="structjpcre2_1_1select.html#a8c6e2d3cb5fb2892aba03f9f8b8093f3" title="Typedef for string (std::string, std::wstring, std::u16string, std::u32string).">jp::String</a></code> will just ensure that you are using the correct string class for the correct character type you selected. If you need to use the basic character type, use <code><a class="el" href="structjpcre2_1_1select.html#aec1247534364b37852872ac504c19f02" title="Typedef for character (char, wchar_t, char16_t, char32_t)">jp::Char</a></code>.</p>
<h2><a class="anchor" id="use-of-vectors-for-match-result"></a>
Use of vectors for match result</h2>
<p>Instead of using full names like <code>std::vector&lt;std::string&gt;</code> and such for storing match result, use the typedefs:</p>
<ol type="1">
<li><code><a class="el" href="structjpcre2_1_1select.html#a148af15b9e24f1fef5ba2ad611428535" title="Vector for Numbered substrings (Sub container).">jp::NumSub</a></code>: Equivalent to <code>std::vector&lt;<a class="el" href="structjpcre2_1_1select.html#a8c6e2d3cb5fb2892aba03f9f8b8093f3" title="Typedef for string (std::string, std::wstring, std::u16string, std::u32string).">jp::String</a>&gt;</code></li>
<li><code><a class="el" href="structjpcre2_1_1select.html#a019a853fe67b764775558db63fb9749d" title="Map for Named substrings.">jp::MapNas</a></code>: Equivalent to <code>std::map&lt;<a class="el" href="structjpcre2_1_1select.html#a8c6e2d3cb5fb2892aba03f9f8b8093f3" title="Typedef for string (std::string, std::wstring, std::u16string, std::u32string).">jp::String</a>, <a class="el" href="structjpcre2_1_1select.html#a8c6e2d3cb5fb2892aba03f9f8b8093f3" title="Typedef for string (std::string, std::wstring, std::u16string, std::u32string).">jp::String</a>&gt;</code> (You can set arbitrary map (e.g <code>std::unordered_map</code>) instead of <code>std::map</code> when using <code>&gt;=C++11</code>)</li>
<li><code><a class="el" href="structjpcre2_1_1select.html#a673968f656e37a0970288d6e7734f471" title="Substring name to Substring number map.">jp::MapNtN</a></code>: Equivalent to <code>std::map&lt;<a class="el" href="structjpcre2_1_1select.html#a8c6e2d3cb5fb2892aba03f9f8b8093f3" title="Typedef for string (std::string, std::wstring, std::u16string, std::u32string).">jp::String</a>, size_t&gt;</code> (You can set arbitrary map (e.g <code>std::unordered_map</code>) instead of <code>std::map</code> when using <code>&gt;=C++11</code>)</li>
<li><code><a class="el" href="structjpcre2_1_1select.html#aa0ee995740f7f2c7bd176058e16049a4" title="Vector of matches with numbered substrings.">jp::VecNum</a></code>: Equivalent to <code>std::vector&lt;<a class="el" href="structjpcre2_1_1select.html#a148af15b9e24f1fef5ba2ad611428535" title="Vector for Numbered substrings (Sub container).">jp::NumSub</a>&gt;</code></li>
<li><code><a class="el" href="structjpcre2_1_1select.html#a756ab2ac6bf47ceb035425d913ef7e99" title="Vector of matches with named substrings.">jp::VecNas</a></code>: Equivalent to <code>std::vector&lt;<a class="el" href="structjpcre2_1_1select.html#a019a853fe67b764775558db63fb9749d" title="Map for Named substrings.">jp::MapNas</a>&gt;</code></li>
<li><code><a class="el" href="structjpcre2_1_1select.html#aeca273ccccbe7db7d8b38b08c9ea489c" title="Vector of substring name to substring number map.">jp::VecNtN</a></code>: Equivalent to <code>std::vector&lt;<a class="el" href="structjpcre2_1_1select.html#a673968f656e37a0970288d6e7734f471" title="Substring name to Substring number map.">jp::MapNtN</a>&gt;</code></li>
<li><code><a class="el" href="namespacejpcre2.html#a183672f239daa2a262b1fb321039abca" title="vector of size_t.">jpcre2::VecOff</a></code>: Equivalent to <code>std::vector&lt;size_t&gt;</code> (note the namespace, it's directly under <code><a class="el" href="namespacejpcre2.html">jpcre2</a></code>)</li>
</ol>
<h2><a class="anchor" id="other-typedefs"></a>
Other typedefs</h2>
<p>Other typedefs are mostly for internal use</p>
<ul>
<li>You should not use the <code><a class="el" href="namespacejpcre2.html#ace32c5cb1dfea02d9b64a7d0d61522ce" title="8 bit unsigned integer.">jpcre2::Ush</a></code> as unsigned short. In JPCRE2 context, it is the smallest unsigned integer type to cover at least the numbers from 1 to 126.</li>
<li><code><a class="el" href="namespacejpcre2.html#a078242d38221a13fb3543b9edd78c099" title="Used for options (bitwise operation)">jpcre2::Uint</a></code> is a fixed width unsigned integer type and will be at least 32 bit wide.</li>
<li><code><a class="el" href="namespacejpcre2.html#a1992f5f6f7d03fe854ad0c4de3352ec5" title="Used for match count and vector size.">jpcre2::SIZE_T</a></code> is the same as <code>PCRE2_SIZE</code> which is defined as <code>size_t</code>.</li>
<li><code><a class="el" href="namespacejpcre2.html#a9dada7b65d04dea5ca8c25bb05611f3f" title="vector for Uint option values.">jpcre2::VecOpt</a></code> is defined as <code>std::vector&lt;<a class="el" href="namespacejpcre2.html#a078242d38221a13fb3543b9edd78c099" title="Used for options (bitwise operation)">jpcre2::Uint</a>&gt;</code>.</li>
</ul>
<h1><a class="anchor" id="error-handling"></a>
Error handling</h1>
<h2><a class="anchor" id="runtime-error"></a>
Runtime error</h2>
<p>When a known error is occurred during pattern compilation or match or replace, the error number and error offsets are set to corresponding variables of the respective classes. You can get the error number, error offset and error message with <code>getErrorNumber()</code>, <code>getErrorOffset()</code> and <code>getErrorMessage()</code> functions respectively. These functions are available for all three classes.</p>
<p><b>Note</b> that, these errors always gets overwritten by previous error, so you only get the last error that occurred.</p>
<p><b>Also note</b> that, these errors never get re-initialized (set to zero), they are always there even when everything else worked great (except some previous error).</p>
<p>If you do experiment with various erroneous situations, make use of the <code>resetErrors()</code> function. You can call it from anywhere in your method chain and immediately set the errors to zero. This function is also defined for all three classes to reset their corresponding errors.</p>
<h2><a class="anchor" id="assertion-failure"></a>
Assertion failure</h2>
<p>JPCRE2 asserts some errors with descriptive error messages. These errors are mistakes in your code and not to be shipped to the client without fixing.</p>
<p>In no situation these errors should be bypassed by <code>#define NDEBUG</code> before including <code><a class="el" href="jpcre2_8hpp.html" title="Main header file for JPCRE2 library to be included by programs that uses its functionalities....">jpcre2.hpp</a></code>. You should investigate the error message and fix the cause.</p>
<blockquote class="doxtable">
<p>When there is no such errors in your finalized code, you may use <code>#define NDEBUG</code> to strip out these assertions. </p>
</blockquote>
<h1><a class="anchor" id="null-safety"></a>
Null safety</h1>
<p>JPCRE2 treats null as valid input and its usage have well-defined behavior throughout JPCRE2 interface. Most of the time a null is treated as 'set something to its initial or empty state'. And also, initial state doesn't necessarily have to be an empty state, and empty state doesn't necessarily have to be an initial state. It depends on what you are working with, refer to the <a href="http://docs.neurobin.org/jpcre2">doc</a> when you are in a bind.</p>
<p>As an example, if null is passed with <code>setSubject()</code>, then the subject is set to its initial state which is empty (not null).</p>
<p>Another example is, when a null is passed to the <code>setRegexObject()</code> function, it literally sets the Regex object to null, which is actually the initial state for that calling object.</p>
<h2><a class="anchor" id="null-safety-with-std-string"></a>
Null safety with std::string</h2>
<p>Giving a null to <code>std::string</code> (and such) constructor is undefined behavior. But you don't need to worry about it with JPCRE2, if it's too much to type Two double quotes (<code>""</code>) to pass an empty string to a JPCRE2 function, you can just use <code>0</code>, it's perfectly fine. But it's a bad practice, so just use this statement as a safety measure.</p>
<p><b>Note:</b> JPCRE2 is supposed to be completely null safe, i.e no undefined behavior for null input. So, if you find any loophole or bug that makes this statement invalid, please report it.</p>
<h1><a class="anchor" id="multi-threading"></a>
Multi threading</h1>
<h2><a class="anchor" id="functions-thread-safety"></a>
Functions</h2>
<p><b>(C) MT safe:</b> <em>All functions in JPCRE2 library are MT safe provided that the instances calling those functions are themselves thread safe.</em></p>
<p><b>When we say '(C) MT safe' or simply 'thread safe' throughout this doc, we mean the above definition of Conditional Multi-Thread safety.</b></p>
<h2><a class="anchor" id="objects-thread-safety"></a>
Objects</h2>
<ol type="1">
<li>There is no data race between two separate objects (<code>Regex</code>, <code>RegexMatch</code>, <code>RegexReplace</code> etc..) because the classes do not contain any static variables.</li>
<li>Temporary class objects are always thread safe.</li>
<li>Temporary class object that uses another third party object reference or pointer is thread safe provided that the access to the third party object is thread safe.</li>
<li>Simultaneous access of the same object is MT unsafe. You can use mutex lock or other mechanisms to ensure thread safety.</li>
</ol>
<p><b>Examples:</b></p>
<p>The following function is thread safe:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <a class="code" href="structjpcre2_1_1select.html">jpcre2::select&lt;char&gt;</a> <a class="code" href="structjpcre2_1_1select.html">jp</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span>* thread_safe_fun1(<span class="keywordtype">void</span>* arg){<span class="comment">//uses no global or static variable, thus thread safe.</span></div>
<div class="line">    <a class="code" href="classjpcre2_1_1select_1_1Regex.html">jp::Regex</a> re(<span class="stringliteral">&quot;\\w&quot;</span>, <span class="stringliteral">&quot;g&quot;</span>);</div>
<div class="line">    <a class="code" href="classjpcre2_1_1select_1_1RegexMatch.html">jp::RegexMatch</a> rm(&amp;re); <span class="comment">//It&#39;s a local variable</span></div>
<div class="line">    rm.setSubject(<span class="stringliteral">&quot;fdsf&quot;</span>).setModifier(<span class="stringliteral">&quot;g&quot;</span>).match();</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><p>The following function is thread safe for joined thread only:</p>
<div class="fragment"><div class="line"><a class="code" href="classjpcre2_1_1select_1_1Regex.html">jp::Regex</a> rec(<span class="stringliteral">&quot;\\w&quot;</span>, <span class="stringliteral">&quot;g&quot;</span>); <span class="comment">//thread unsafe.</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> *thread_pseudo_safe_fun1(<span class="keywordtype">void</span> *arg){</div>
<div class="line">    <span class="comment">//uses global variable &#39;rec&#39;, but uses</span></div>
<div class="line">    <span class="comment">//mutex lock, thus thread safe when the thread is joined with the main thread.</span></div>
<div class="line">    <span class="comment">//But, when thread is detached from the main thread, it won&#39;t be thread safe any more,</span></div>
<div class="line">    <span class="comment">//because, the main thread can destroy the rec object while possibly being used by the detached child thread.</span></div>
<div class="line">    pthread_mutex_lock( &amp;mtx );</div>
<div class="line">    <a class="code" href="classjpcre2_1_1select_1_1RegexMatch.html">jp::RegexMatch</a> rm(&amp;rec);</div>
<div class="line">    rm.setSubject(<span class="stringliteral">&quot;fdsf&quot;</span>).setModifier(<span class="stringliteral">&quot;g&quot;</span>).match();</div>
<div class="line">    pthread_mutex_unlock( &amp;mtx);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><p>Example multi-threaded programs are provided in <em><a class="el" href="test__pthread_8cpp.html">src/test_pthread.cpp</a></em> and <em><a class="el" href="teststdthread_8cpp.html">src/teststdthread.cpp</a></em>. The thread safety of these programs are tested with Valgrind (<code>drd</code> tool). See <a href="#test-suit">Test suit</a> for more details on the test.</p>
<h1><a class="anchor" id="compatibility-with-compilers"></a>
Compatibility with compilers</h1>
<ul>
<li>To use JPCRE2 in its full capability (including <code>&gt;=C++11</code> features), use latest compilers with full <code>C++11</code> support.</li>
<li>If you do not use <code>&gt;=C++11</code>, you will be OK with older compilers.</li>
</ul>
<h1><a class="anchor" id="examples"></a>
Examples</h1>
<p>Examples and test programs are available in <code>src/test*.cpp</code> files.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">File </th><th class="markdownTableHeadNone">Containing examples  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="test0_8cpp.html">test0.cpp</a></code> </td><td class="markdownTableBodyNone">Handling <code>std::string</code> and <code>std::wstring</code>.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="test16_8cpp.html">test16.cpp</a></code> </td><td class="markdownTableBodyNone">Performing regex match and regex replace with <code>std::wstring</code> and <code>std::u16string</code>.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="test32_8cpp.html">test32.cpp</a></code> </td><td class="markdownTableBodyNone">Performing regex match and regex replace with <code>std::wstring</code> and <code>std::u32string</code>.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="test__match_8cpp.html">test_match.cpp</a></code> </td><td class="markdownTableBodyNone">Performing regex match against a pattern and getting the match count and match results. Shows how to iterate over the match results to get the captured groups/substrings.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="test__match2_8cpp.html">test_match2.cpp</a></code> </td><td class="markdownTableBodyNone">Contains an example to take subject string, pattern and modifier from user input and perform regex match using JPCRE2.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="testmd_8cpp.html">testmd.cpp</a></code> </td><td class="markdownTableBodyNone">Examples of working with modifier table.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="testme_8cpp.html">testme.cpp</a></code> </td><td class="markdownTableBodyNone">Examples of using MatchEvaluator to perform replace.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="test__replace_8cpp.html">test_replace.cpp</a></code> </td><td class="markdownTableBodyNone">Example of doing regex replace.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="test__replace2_8cpp.html">test_replace2.cpp</a></code> </td><td class="markdownTableBodyNone">Contains an example to take subject string, replacement string, modifier and pattern from user input and perform regex replace with JPCRE2  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="test__pthread_8cpp.html">test_pthread.cpp</a></code> </td><td class="markdownTableBodyNone">Multi threaded examples with POSIX pthread.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="teststdthread_8cpp.html">teststdthread.cpp</a></code> </td><td class="markdownTableBodyNone">Multi threaded examples with <code>std::thread</code>.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="test__shorts_8cpp.html">test_shorts.cpp</a></code> </td><td class="markdownTableBodyNone">Contains some short examples.  </td></tr>
</table>
<h1><a class="anchor" id="short-examples"></a>
Short examples</h1>
<div class="fragment"><div class="line"><span class="keywordtype">size_t</span> count;</div>
<div class="line"><span class="comment">//Check if string matches the pattern</span></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * The following uses a temporary Regex object.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordflow">if</span>(<a class="code" href="classjpcre2_1_1select_1_1Regex.html">jp::Regex</a>(<span class="stringliteral">&quot;(\\d)|(\\w)&quot;</span>).match(<span class="stringliteral">&quot;I am the subject&quot;</span>))</div>
<div class="line">    std::cout&lt;&lt;<span class="stringliteral">&quot;\nmatched&quot;</span>;</div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * Using the modifier S (i.e jpcre2::JIT_COMPILE) with temporary object may or may not give you</span></div>
<div class="line"><span class="comment"> * any performance boost (depends on the complexity of the pattern). The more complex</span></div>
<div class="line"><span class="comment"> * the pattern gets, the more sense the S modifier makes.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//If you want to match all and get the match count, use the action modifier &#39;g&#39;:</span></div>
<div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>&lt;&lt;</div>
<div class="line">    <a class="code" href="classjpcre2_1_1select_1_1Regex.html">jp::Regex</a>(<span class="stringliteral">&quot;(\\d)|(\\w)&quot;</span>,<span class="stringliteral">&quot;m&quot;</span>).<a class="code" href="classjpcre2_1_1select_1_1Regex.html#a32a4c3d27c1f5e64bf3565e375a39944">match</a>(<span class="stringliteral">&quot;I am the subject&quot;</span>,<span class="stringliteral">&quot;g&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * Modifiers passed to the Regex constructor or with compile() function are compile modifiers</span></div>
<div class="line"><span class="comment"> * Modifiers passed with the match() or replace() functions are action modifiers</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Substrings/Captured groups:</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * *** Getting captured groups/substring ***</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * captured groups or substrings are stored in maps/vectors for each match,</span></div>
<div class="line"><span class="comment"> * and each match is stored in a vector.</span></div>
<div class="line"><span class="comment"> * Thus captured groups are in a vector of maps/vectors.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * PCRE2 provides two types of substrings:</span></div>
<div class="line"><span class="comment"> *  1. numbered (indexed) substring</span></div>
<div class="line"><span class="comment"> *  2. named substring</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * For the above two, we have two vectors respectively:</span></div>
<div class="line"><span class="comment"> *  1. jp::VecNum (Corresponding vector: jp::NumSub)</span></div>
<div class="line"><span class="comment"> *  2. jp::VecNas (Corresponding map: jp::MapNas)</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Another additional vector is available to get the substring position/number</span></div>
<div class="line"><span class="comment"> * for a particular captured group by name. It&#39;s a vector of name to number maps</span></div>
<div class="line"><span class="comment"> *  * jp::VecNtN (Corresponding map: jp:MapNtN)</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// ***** Get numbered substring ***** ///</span></div>
<div class="line"><a class="code" href="structjpcre2_1_1select.html#aa0ee995740f7f2c7bd176058e16049a4">jp::VecNum</a> vec_num;</div>
<div class="line"><a class="code" href="classjpcre2_1_1select_1_1RegexMatch.html">jp::RegexMatch</a> rm;</div>
<div class="line"><a class="code" href="classjpcre2_1_1select_1_1Regex.html">jp::Regex</a> re(<span class="stringliteral">&quot;(\\w+)\\s*(\\d+)&quot;</span>,<span class="stringliteral">&quot;m&quot;</span>);</div>
<div class="line">count =</div>
<div class="line"><a class="code" href="classjpcre2_1_1select_1_1RegexMatch.html">jp::RegexMatch</a>(&amp;re).<a class="code" href="classjpcre2_1_1select_1_1RegexMatch.html#a22c904bc6e606231ced1f2570f345d48">setSubject</a>(<span class="stringliteral">&quot;I am 23, I am digits 10&quot;</span>)</div>
<div class="line">                   .<a class="code" href="classjpcre2_1_1select_1_1RegexMatch.html#af989d0e0223e5088b938a85e866f5bb8">setModifier</a>(<span class="stringliteral">&quot;g&quot;</span>)</div>
<div class="line">                   .<a class="code" href="classjpcre2_1_1select_1_1RegexMatch.html#aa07bf6d04f799733c6993f5ac19757f0">setNumberedSubstringVector</a>(&amp;vec_num)</div>
<div class="line">                   .<a class="code" href="classjpcre2_1_1select_1_1RegexMatch.html#a93e461bc1aa7606f161938dc94e9909d">match</a>();</div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">* count (the return value) is guaranteed to give you the correct number of matches,</span></div>
<div class="line"><span class="comment">* while vec_num.size() may give you wrong result if any match result</span></div>
<div class="line"><span class="comment">* was failed to be inserted in the vector. This should not happen</span></div>
<div class="line"><span class="comment">* i.e count and vec_num.size() should always be equal.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nNumber of matches: &quot;</span>&lt;&lt;count<span class="comment">/* or vec_num.size()*/</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Now vec_num is populated with numbered substrings for each match</span></div>
<div class="line"><span class="comment">//The size of vec_num is the total match count</span></div>
<div class="line"><span class="comment">//vec_num[0] is the first match</span></div>
<div class="line"><span class="comment">//The type of vec_num[0] is jp::NumSub</span></div>
<div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nTotal match of first match: &quot;</span>&lt;&lt;vec_num[0][0];</div>
<div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nCaptured group 1 of first match: &quot;</span>&lt;&lt;vec_num[0][1];</div>
<div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nCaptured group 2 of first match: &quot;</span>&lt;&lt;vec_num[0][2];</div>
<div class="line"> </div>
<div class="line"><span class="comment">//captured group 3 doesn&#39;t exist, (with operator [] it&#39;s a segfault)</span></div>
<div class="line"><span class="comment">//std::cout&lt;&lt;&quot;\nCaptured group 3 of first match: &quot;&lt;&lt;vec_num[0][3];</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//Using at() will throw std::out_of_range exception</span></div>
<div class="line"><span class="comment">//~ try {</span></div>
<div class="line">    <span class="comment">//~ std::cout&lt;&lt;&quot;\nCaptured group 3 of first match: &quot;&lt;&lt;vec_num[0].at(3);</span></div>
<div class="line"><span class="comment">//~ } catch (const std::out_of_range&amp; e) {</span></div>
<div class="line">    <span class="comment">//~ std::cerr&lt;&lt;&quot;\n&quot;&lt;&lt;e.what();</span></div>
<div class="line"><span class="comment">//~ }</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">//There were two matches found (vec_num.size() == 2) in the above example</span></div>
<div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nTotal match of second match: &quot;</span>&lt;&lt;vec_num[1][0];      <span class="comment">//Total match (group 0) from second match</span></div>
<div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nCaptured group 1 of second match: &quot;</span>&lt;&lt;vec_num[1][1]; <span class="comment">//captured group 1 from second match</span></div>
<div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nCaptured group 2 of second match: &quot;</span>&lt;&lt;vec_num[1][2]; <span class="comment">//captured group 2 from second match</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// ***** Get named substring ***** //</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="structjpcre2_1_1select.html#a756ab2ac6bf47ceb035425d913ef7e99">jp::VecNas</a> vec_nas;</div>
<div class="line"><a class="code" href="structjpcre2_1_1select.html#aeca273ccccbe7db7d8b38b08c9ea489c">jp::VecNtN</a> vec_ntn; <span class="comment">// We will get name to number map vector too</span></div>
<div class="line">re.compile(<span class="stringliteral">&quot;(?&lt;word&gt;\\w+)\\s*(?&lt;digit&gt;\\d+)&quot;</span>,<span class="stringliteral">&quot;m&quot;</span>);</div>
<div class="line">count =</div>
<div class="line"><a class="code" href="classjpcre2_1_1select_1_1RegexMatch.html">jp::RegexMatch</a>(&amp;re).<a class="code" href="classjpcre2_1_1select_1_1RegexMatch.html#a22c904bc6e606231ced1f2570f345d48">setSubject</a>(<span class="stringliteral">&quot;I am 23, I am digits 10&quot;</span>)</div>
<div class="line">                   .<a class="code" href="classjpcre2_1_1select_1_1RegexMatch.html#af989d0e0223e5088b938a85e866f5bb8">setModifier</a>(<span class="stringliteral">&quot;g&quot;</span>)</div>
<div class="line">                   <span class="comment">//.setNumberedSubstringVector(vec_num) // We don&#39;t need it in this example</span></div>
<div class="line">                   .<a class="code" href="classjpcre2_1_1select_1_1RegexMatch.html#aae59dd4438faecd5da9d69919f47494b">setNamedSubstringVector</a>(&amp;vec_nas)</div>
<div class="line">                   .<a class="code" href="classjpcre2_1_1select_1_1RegexMatch.html#a2484deb0d3e6b261d9ad8533377d32c1">setNameToNumberMapVector</a>(&amp;vec_ntn) <span class="comment">// Additional (name to number maps)</span></div>
<div class="line">                   .<a class="code" href="classjpcre2_1_1select_1_1RegexMatch.html#a93e461bc1aa7606f161938dc94e9909d">match</a>();</div>
<div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nNumber of matches: &quot;</span>&lt;&lt;vec_nas.size()<span class="comment">/* or count */</span>;</div>
<div class="line"><span class="comment">//Now vec_nas is populated with named substrings for each match</span></div>
<div class="line"><span class="comment">//The size of vec_nas is the total match count</span></div>
<div class="line"><span class="comment">//vec_nas[0] is the first match</span></div>
<div class="line"><span class="comment">//The type of vec_nas[0] is jp::MapNas</span></div>
<div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nCaptured group (word) of first match: &quot;</span>&lt;&lt;vec_nas[0][<span class="stringliteral">&quot;word&quot;</span>];</div>
<div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nCaptured group (digit) of first match: &quot;</span>&lt;&lt;vec_nas[0][<span class="stringliteral">&quot;digit&quot;</span>];</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Trying to access a non-existence named substirng with [] operator will give you empty string</span></div>
<div class="line"><span class="comment">//If the existence of a substring is important, use the std::map::find() or std::map::at() </span></div>
<div class="line"><span class="comment">//(&gt;=C++11) function to access map elements.</span></div>
<div class="line"><span class="comment">/* //&gt;=C++11</span></div>
<div class="line"><span class="comment">try{</span></div>
<div class="line"><span class="comment">    std::cout&lt;&lt;&quot;\nCaptured group (name) of first match: &quot;&lt;&lt;vec_nas[0].at(&quot;name&quot;);</span></div>
<div class="line"><span class="comment">} catch(const std::logic_error&amp; e){</span></div>
<div class="line"><span class="comment">    std::cerr&lt;&lt;&quot;\nCaptured group (name) doesn&#39;t exist&quot;;</span></div>
<div class="line"><span class="comment">}*/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//There were two matches found (vec_nas.size() == 2) in the above example</span></div>
<div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nCaptured group (word) of second match: &quot;</span>&lt;&lt;vec_nas[1][<span class="stringliteral">&quot;word&quot;</span>];</div>
<div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nCaptured group (digit) of second match: &quot;</span>&lt;&lt;vec_nas[1][<span class="stringliteral">&quot;digit&quot;</span>];</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Get the position (number) of a captured group name (that was found in match)</span></div>
<div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nPosition of captured group (word) in first match: &quot;</span>&lt;&lt;vec_ntn[0][<span class="stringliteral">&quot;word&quot;</span>];</div>
<div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\nPosition of captured group (digit) in first match: &quot;</span>&lt;&lt;vec_ntn[0][<span class="stringliteral">&quot;digit&quot;</span>];</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * Replacement Examples</span></div>
<div class="line"><span class="comment"> * Replace pattern in a string with a replacement string</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * The Regex::replace() function can take a subject and replacement string as argument.</span></div>
<div class="line"><span class="comment"> * </span></div>
<div class="line"><span class="comment"> * You can also pass the subject with setSubject() function in method chain,</span></div>
<div class="line"><span class="comment"> * replacement string with setReplaceWith() function in method chain, etc ...</span></div>
<div class="line"><span class="comment"> * A call to RegexReplace::replace() in the method chain will return the resultant string</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>&lt;&lt;</div>
<div class="line"><span class="comment">//replace first occurrence of a digit with @</span></div>
<div class="line"><a class="code" href="classjpcre2_1_1select_1_1Regex.html">jp::Regex</a>(<span class="stringliteral">&quot;\\d&quot;</span>).<a class="code" href="classjpcre2_1_1select_1_1Regex.html#a6cf544defa7a782ea221f190cb3ebef9">replace</a>(<span class="stringliteral">&quot;I am the subject string 44&quot;</span>, <span class="stringliteral">&quot;@&quot;</span>);</div>
<div class="line"> </div>
<div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>&lt;&lt;</div>
<div class="line"><span class="comment">//replace all occurrences of a digit with @</span></div>
<div class="line"><a class="code" href="classjpcre2_1_1select_1_1Regex.html">jp::Regex</a>(<span class="stringliteral">&quot;\\d&quot;</span>).<a class="code" href="classjpcre2_1_1select_1_1Regex.html#a6cf544defa7a782ea221f190cb3ebef9">replace</a>(<span class="stringliteral">&quot;I am the subject string 44&quot;</span>, <span class="stringliteral">&quot;@&quot;</span>, <span class="stringliteral">&quot;g&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//swap two parts of a string</span></div>
<div class="line">std::cout&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>&lt;&lt;</div>
<div class="line"><a class="code" href="classjpcre2_1_1select_1_1Regex.html">jp::Regex</a>(<span class="stringliteral">&quot;^([^\t]+)\t([^\t]+)$&quot;</span>)</div>
<div class="line">    .<a class="code" href="classjpcre2_1_1select_1_1Regex.html#a6cf544defa7a782ea221f190cb3ebef9">replace</a>(<span class="stringliteral">&quot;I am the subject\tTo be swapped according to tab&quot;</span>, <span class="stringliteral">&quot;$2 $1&quot;</span>);</div>
<div class="line">    </div>
<div class="line"><span class="comment">//Doing the above with method chain:</span></div>
<div class="line">re.compile(<span class="stringliteral">&quot;^([^\t]+)\t([^\t]+)$&quot;</span>);</div>
<div class="line"><a class="code" href="classjpcre2_1_1select_1_1RegexReplace.html">jp::RegexReplace</a>(&amp;re).<a class="code" href="classjpcre2_1_1select_1_1RegexReplace.html#a454e9333152df917153d0265da4ea668">setSubject</a>(<span class="stringliteral">&quot;I am the subject\tTo be swapped according to tab&quot;</span>)</div>
<div class="line">                     .<a class="code" href="classjpcre2_1_1select_1_1RegexReplace.html#ad3b9aa22d7d410db1d53002c824ecd72">setReplaceWith</a>(<span class="stringliteral">&quot;$2 $1&quot;</span>)</div>
<div class="line">                     .<a class="code" href="classjpcre2_1_1select_1_1RegexReplace.html#afbd99cc287436226e3510b71ba21eb8a">replace</a>();</div>
</div><!-- fragment --><h1><a class="anchor" id="test-suit"></a>
Test suit</h1>
<p>Some test programs are written to check for major flaws like segfault, memory leak and crucial input/output validation. Before trying to run the tests, make sure you have all 3 PCRE2 libraries installed on your system.</p>
<p>For the simplest (minimal) test, run:</p>
<div class="fragment"><div class="line">#You can add --enable-cpp11 to test cpp11 features.</div>
<div class="line">./configure --enable-test</div>
<div class="line">make check</div>
</div><!-- fragment --><p>To check with <code>valgrind</code>, run:</p>
<div class="fragment"><div class="line">#requires valgrind to be installed on the system</div>
<div class="line">#You can add --enable-cpp11 to test cpp11 features.</div>
<div class="line">./configure --enable-valgrind</div>
<div class="line">make check</div>
</div><!-- fragment --><p>To check the multi threaded examples with <code>drd</code>, run:</p>
<div class="fragment"><div class="line">#requires valgrind to be installed on the system</div>
<div class="line">#You can add --enable-cpp11 to test cpp11 features.</div>
<div class="line">./configure --enable-thread-check</div>
<div class="line">make check</div>
</div><!-- fragment --><p>To prepare a coverage report, run:</p>
<div class="fragment"><div class="line">#requires lcov and genhtml to be installed on the system</div>
<div class="line">#enable cpp11 to cover cpp11 codes.</div>
<div class="line">#clean any previous make</div>
<div class="line">make distclean #ignore errors</div>
<div class="line">./configure --enable-coverage --enable-cpp11</div>
<div class="line">make coverage</div>
</div><!-- fragment --><h1><a class="anchor" id="the-configure-script"></a>
The configure script</h1>
<p>The configure script generated by autotools checks for availability of several programs and let's you set several options to control your testing environment. These are the options supported by configure scipt:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Option </th><th class="markdownTableHeadNone">Details  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>--[enable/disable]-test</code> </td><td class="markdownTableBodyNone">Enable/Disable test suit.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>--[enable/disable]-cpp11</code> </td><td class="markdownTableBodyNone">Enable/Disable building tests with C++11 features.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>--[enable/disable]-valgrind</code> </td><td class="markdownTableBodyNone">Enable/Disable valgrind test (memory leak test).  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>--[enable/disable]-thread-check</code> </td><td class="markdownTableBodyNone">Enable/Disable thread check on multi threaded examples.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>--[enable/disable]-coverage</code> </td><td class="markdownTableBodyNone">Enable/Disable coverage report.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>--[enable/disable]-silent-rules</code> </td><td class="markdownTableBodyNone">Enable/Disable silent rules (enabled by default). You will get prettified <code>make</code> output if enabled.  </td></tr>
</table>
<h1><a class="anchor" id="contributing-pull-request"></a>
Contributing/Pull request</h1>
<p><b>Please do all pull requests against the master branch. <strike>The default branch is 'release' which is not where continuous development of JPCRE2 is done</strike>.</b></p>
<p>If you find any error in the documentation or confusing/misleading use of terms, or anything that cathces your eye and feels not right, please open an issue in the <a href="https://github.com/jpcre2/jpcre2/issues">issue page</a>. Or if you want to fix it and do pull request then use the master branch.</p>
<p>This page is generated from doxy/doxydoc.md file, thus changing the README.md file will have no impact.</p>
<h1><a class="anchor" id="licence"></a>
LICENCE</h1>
<p>This project comes with a BSD LICENCE, see the LICENCE file for more details.</p>
<p>It is not necessary to let me know which project you are using this library on, but an optional choice. I would very much appreciate it, if you let me know about the name (and short description if applicable) of the project. So if you have the time, please send me an <a href="https://neurobin.org/about/contact/?s=Using+jpcre2+in+a+project&amp;m=I+am+using+jpcre2+in+the+following+project%3A%0A%0AProject+Name%3A+%0AShort+description%3A%0A%0AYou+can+share+the+project+name+publicly%3A+%5Byes%2Fno%5D%0AYou+can+share+the+project+description+publicly%3A+%5Byes%2Fno%5D%0AYou+can+share+the+project+author+name+publicly%3A+%5Byes%2Fno%5D%0AEmail+will+be+private+and+not+shared%3A+yes%0A">email</a>. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aclassjpcre2_1_1select_1_1Regex_html_a6cf544defa7a782ea221f190cb3ebef9"><div class="ttname"><a href="classjpcre2_1_1select_1_1Regex.html#a6cf544defa7a782ea221f190cb3ebef9">jpcre2::select::Regex::replace</a></div><div class="ttdeci">String replace(String const &amp;mains, String const &amp;repl, Modifier const &amp;mod=&quot;&quot;, SIZE_T *counter=0)</div><div class="ttdoc">Perform regex replace and return the replaced string using a temporary replace object.</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:4285</div></div>
<div class="ttc" id="aclassjpcre2_1_1select_1_1RegexMatch_html_a2484deb0d3e6b261d9ad8533377d32c1"><div class="ttname"><a href="classjpcre2_1_1select_1_1RegexMatch.html#a2484deb0d3e6b261d9ad8533377d32c1">jpcre2::select::RegexMatch::setNameToNumberMapVector</a></div><div class="ttdeci">virtual RegexMatch &amp; setNameToNumberMapVector(VecNtN *v)</div><div class="ttdoc">Set a pointer to the name to number map vector.</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:1732</div></div>
<div class="ttc" id="aclassjpcre2_1_1select_1_1RegexMatch_html_aae59dd4438faecd5da9d69919f47494b"><div class="ttname"><a href="classjpcre2_1_1select_1_1RegexMatch.html#aae59dd4438faecd5da9d69919f47494b">jpcre2::select::RegexMatch::setNamedSubstringVector</a></div><div class="ttdeci">virtual RegexMatch &amp; setNamedSubstringVector(VecNas *v)</div><div class="ttdoc">Set a pointer to the named substring vector.</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:1721</div></div>
<div class="ttc" id="aclassjpcre2_1_1select_1_1Regex_html_a32a4c3d27c1f5e64bf3565e375a39944"><div class="ttname"><a href="classjpcre2_1_1select_1_1Regex.html#a32a4c3d27c1f5e64bf3565e375a39944">jpcre2::select::Regex::match</a></div><div class="ttdeci">SIZE_T match(String const &amp;s, Modifier const &amp;mod, PCRE2_SIZE start_offset=0)</div><div class="ttdoc">Perform regex match and return match count using a temporary match object.</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:4227</div></div>
<div class="ttc" id="aclassjpcre2_1_1select_1_1MatchEvaluator_html_ac1301db830e8c52f39f7e78256da4fdd"><div class="ttname"><a href="classjpcre2_1_1select_1_1MatchEvaluator.html#ac1301db830e8c52f39f7e78256da4fdd">jpcre2::select::MatchEvaluator::setRegexObject</a></div><div class="ttdeci">MatchEvaluator &amp; setRegexObject(Regex const *r)</div><div class="ttdoc">Call RegexMatch::setRegexObject(r).</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:2654</div></div>
<div class="ttc" id="aclassjpcre2_1_1select_1_1RegexMatch_html_a22c904bc6e606231ced1f2570f345d48"><div class="ttname"><a href="classjpcre2_1_1select_1_1RegexMatch.html#a22c904bc6e606231ced1f2570f345d48">jpcre2::select::RegexMatch::setSubject</a></div><div class="ttdeci">virtual RegexMatch &amp; setSubject(String const &amp;s)</div><div class="ttdoc">Set the subject string for match.</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:1762</div></div>
<div class="ttc" id="astructjpcre2_1_1select_1_1callback_html_af00ff195ee7c01599a9f73d3cac96b7f"><div class="ttname"><a href="structjpcre2_1_1select_1_1callback.html#af00ff195ee7c01599a9f73d3cac96b7f">jpcre2::select::callback::fill</a></div><div class="ttdeci">static String fill(NumSub const &amp;num, MapNas const &amp;nas, MapNtn const &amp;ntn)</div><div class="ttdoc">Callback function for populating match vectors that does not modify the subject string.</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:2046</div></div>
<div class="ttc" id="aclassjpcre2_1_1ModifierTable_html_ab3e9c9242d07e9572afc66d12c892ff3"><div class="ttname"><a href="classjpcre2_1_1ModifierTable.html#ab3e9c9242d07e9572afc66d12c892ff3">jpcre2::ModifierTable::setCompileModifierTable</a></div><div class="ttdeci">ModifierTable &amp; setCompileModifierTable(std::string const &amp;tabs, VecOpt const &amp;tabv)</div><div class="ttdoc">Set modifier table for compile.</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:1113</div></div>
<div class="ttc" id="aclassjpcre2_1_1select_1_1MatchEvaluator_html_acacf66fad74770804ea06bb7125c7098"><div class="ttname"><a href="classjpcre2_1_1select_1_1MatchEvaluator.html#acacf66fad74770804ea06bb7125c7098">jpcre2::select::MatchEvaluator::nreplace</a></div><div class="ttdeci">String nreplace(bool do_match=true, Uint jro=0, SIZE_T *counter=0)</div><div class="ttdoc">Perform regex replace with this match evaluator.</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:4591</div></div>
<div class="ttc" id="aclassjpcre2_1_1select_1_1MatchEvaluator_html_a217a3076e370f2da91aa927ebd4b5bb8"><div class="ttname"><a href="classjpcre2_1_1select_1_1MatchEvaluator.html#a217a3076e370f2da91aa927ebd4b5bb8">jpcre2::select::MatchEvaluator::setSubject</a></div><div class="ttdeci">MatchEvaluator &amp; setSubject(String const &amp;s)</div><div class="ttdoc">Call RegexMatch::setSubject(String const &amp;s).</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:2662</div></div>
<div class="ttc" id="aclassjpcre2_1_1select_1_1RegexReplace_html_afbd99cc287436226e3510b71ba21eb8a"><div class="ttname"><a href="classjpcre2_1_1select_1_1RegexReplace.html#afbd99cc287436226e3510b71ba21eb8a">jpcre2::select::RegexReplace::replace</a></div><div class="ttdeci">String replace(void)</div><div class="ttdoc">Perform regex replace by retrieving subject string, replacement string, modifier and other options fr...</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:4654</div></div>
<div class="ttc" id="aclassjpcre2_1_1ModifierTable_html"><div class="ttname"><a href="classjpcre2_1_1ModifierTable.html">jpcre2::ModifierTable</a></div><div class="ttdoc">Lets you create custom modifier tables.</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:832</div></div>
<div class="ttc" id="aclassjpcre2_1_1select_1_1RegexReplace_html_ad3b9aa22d7d410db1d53002c824ecd72"><div class="ttname"><a href="classjpcre2_1_1select_1_1RegexReplace.html#ad3b9aa22d7d410db1d53002c824ecd72">jpcre2::select::RegexReplace::setReplaceWith</a></div><div class="ttdeci">RegexReplace &amp; setReplaceWith(String const &amp;s)</div><div class="ttdoc">Set the replacement string.</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:3261</div></div>
<div class="ttc" id="aclassjpcre2_1_1select_1_1RegexMatch_html_af989d0e0223e5088b938a85e866f5bb8"><div class="ttname"><a href="classjpcre2_1_1select_1_1RegexMatch.html#af989d0e0223e5088b938a85e866f5bb8">jpcre2::select::RegexMatch::setModifier</a></div><div class="ttdeci">virtual RegexMatch &amp; setModifier(Modifier const &amp;s)</div><div class="ttdoc">Set the modifier (resets all JPCRE2 and PCRE2 options) by calling RegexMatch::changeModifier().</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:1790</div></div>
<div class="ttc" id="astructjpcre2_1_1select_html_aa0ee995740f7f2c7bd176058e16049a4"><div class="ttname"><a href="structjpcre2_1_1select.html#aa0ee995740f7f2c7bd176058e16049a4">jpcre2::select::VecNum</a></div><div class="ttdeci">std::vector&lt; NumSub &gt; VecNum</div><div class="ttdoc">Vector of matches with numbered substrings.</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:1279</div></div>
<div class="ttc" id="aclassjpcre2_1_1select_1_1RegexReplace_html"><div class="ttname"><a href="classjpcre2_1_1select_1_1RegexReplace.html">jpcre2::select::RegexReplace</a></div><div class="ttdoc">Provides public constructors to create RegexReplace objects.</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:2890</div></div>
<div class="ttc" id="anamespacejpcre2_html_a85c143271501e383843f45b9999c2f00a5e8bab7c478015b19baf3e84ed00876e"><div class="ttname"><a href="namespacejpcre2.html#a85c143271501e383843f45b9999c2f00a5e8bab7c478015b19baf3e84ed00876e">jpcre2::JIT_COMPILE</a></div><div class="ttdeci">@ JIT_COMPILE</div><div class="ttdoc">Perform JIT compilation for optimization.</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:154</div></div>
<div class="ttc" id="astructjpcre2_1_1select_html_a019a853fe67b764775558db63fb9749d"><div class="ttname"><a href="structjpcre2_1_1select.html#a019a853fe67b764775558db63fb9749d">jpcre2::select::MapNas</a></div><div class="ttdeci">class Map&lt; String, String &gt; MapNas</div><div class="ttdoc">Map for Named substrings.</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:1257</div></div>
<div class="ttc" id="ajpcre2_8hpp_html"><div class="ttname"><a href="jpcre2_8hpp.html">jpcre2.hpp</a></div><div class="ttdoc">Main header file for JPCRE2 library to be included by programs that uses its functionalities....</div></div>
<div class="ttc" id="aclassjpcre2_1_1select_1_1RegexMatch_html_a93e461bc1aa7606f161938dc94e9909d"><div class="ttname"><a href="classjpcre2_1_1select_1_1RegexMatch.html#a93e461bc1aa7606f161938dc94e9909d">jpcre2::select::RegexMatch::match</a></div><div class="ttdeci">virtual SIZE_T match(void)</div><div class="ttdoc">Perform match operation using info from class variables and return the match count and store the resu...</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:4772</div></div>
<div class="ttc" id="astructjpcre2_1_1select_html_a8c6e2d3cb5fb2892aba03f9f8b8093f3"><div class="ttname"><a href="structjpcre2_1_1select.html#a8c6e2d3cb5fb2892aba03f9f8b8093f3">jpcre2::select::String</a></div><div class="ttdeci">std::basic_string&lt; Char_T &gt; String</div><div class="ttdoc">Typedef for string (std::string, std::wstring, std::u16string, std::u32string).</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:1253</div></div>
<div class="ttc" id="aclassjpcre2_1_1select_1_1RegexReplace_html_a454e9333152df917153d0265da4ea668"><div class="ttname"><a href="classjpcre2_1_1select_1_1RegexReplace.html#a454e9333152df917153d0265da4ea668">jpcre2::select::RegexReplace::setSubject</a></div><div class="ttdeci">RegexReplace &amp; setSubject(String const &amp;s)</div><div class="ttdoc">Set the subject string for replace.</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:3227</div></div>
<div class="ttc" id="aclassjpcre2_1_1select_1_1Regex_html"><div class="ttname"><a href="classjpcre2_1_1select_1_1Regex.html">jpcre2::select::Regex</a></div><div class="ttdoc">Provides public constructors to create Regex object.</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:3550</div></div>
<div class="ttc" id="aclassjpcre2_1_1select_1_1MatchEvaluator_html_a2f5019178812d44015051a097260f51a"><div class="ttname"><a href="classjpcre2_1_1select_1_1MatchEvaluator.html#a2f5019178812d44015051a097260f51a">jpcre2::select::MatchEvaluator::setModifier</a></div><div class="ttdeci">MatchEvaluator &amp; setModifier(Modifier const &amp;s)</div><div class="ttdoc">Call RegexMatch::setModifier(Modifier const&amp; s).</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:2678</div></div>
<div class="ttc" id="aclassjpcre2_1_1select_1_1RegexMatch_html_aa07bf6d04f799733c6993f5ac19757f0"><div class="ttname"><a href="classjpcre2_1_1select_1_1RegexMatch.html#aa07bf6d04f799733c6993f5ac19757f0">jpcre2::select::RegexMatch::setNumberedSubstringVector</a></div><div class="ttdeci">virtual RegexMatch &amp; setNumberedSubstringVector(VecNum *v)</div><div class="ttdoc">Set a pointer to the numbered substring vector.</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:1710</div></div>
<div class="ttc" id="astructjpcre2_1_1select_html_a148af15b9e24f1fef5ba2ad611428535"><div class="ttname"><a href="structjpcre2_1_1select.html#a148af15b9e24f1fef5ba2ad611428535">jpcre2::select::NumSub</a></div><div class="ttdeci">std::vector&lt; String &gt; NumSub</div><div class="ttdoc">Vector for Numbered substrings (Sub container).</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:1271</div></div>
<div class="ttc" id="astructjpcre2_1_1select_html"><div class="ttname"><a href="structjpcre2_1_1select.html">jpcre2::select</a></div><div class="ttdoc">struct to select the types.</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:1238</div></div>
<div class="ttc" id="astructjpcre2_1_1select_html_aeca273ccccbe7db7d8b38b08c9ea489c"><div class="ttname"><a href="structjpcre2_1_1select.html#aeca273ccccbe7db7d8b38b08c9ea489c">jpcre2::select::VecNtN</a></div><div class="ttdeci">std::vector&lt; MapNtN &gt; VecNtN</div><div class="ttdoc">Vector of substring name to substring number map.</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:1275</div></div>
<div class="ttc" id="anamespacejpcre2_html_a078242d38221a13fb3543b9edd78c099"><div class="ttname"><a href="namespacejpcre2.html#a078242d38221a13fb3543b9edd78c099">jpcre2::Uint</a></div><div class="ttdeci">uint32_t Uint</div><div class="ttdoc">Used for options (bitwise operation)</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:130</div></div>
<div class="ttc" id="aclassjpcre2_1_1select_1_1RegexMatch_html"><div class="ttname"><a href="classjpcre2_1_1select_1_1RegexMatch.html">jpcre2::select::RegexMatch</a></div><div class="ttdoc">Provides public constructors to create RegexMatch objects.</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:1375</div></div>
<div class="ttc" id="astructjpcre2_1_1select_html_a756ab2ac6bf47ceb035425d913ef7e99"><div class="ttname"><a href="structjpcre2_1_1select.html#a756ab2ac6bf47ceb035425d913ef7e99">jpcre2::select::VecNas</a></div><div class="ttdeci">std::vector&lt; MapNas &gt; VecNas</div><div class="ttdoc">Vector of matches with named substrings.</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:1273</div></div>
<div class="ttc" id="aclassjpcre2_1_1select_1_1MatchEvaluator_html"><div class="ttname"><a href="classjpcre2_1_1select_1_1MatchEvaluator.html">jpcre2::select::MatchEvaluator</a></div><div class="ttdoc">This class inherits RegexMatch and provides a similar functionality.</div><div class="ttdef"><b>Definition:</b> jpcre2.hpp:2135</div></div>
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Authored by <a href="https://github.com/neurobin">Md Jahidul Hamid</a>.
    Doc created with <a href="http://www.doxygen.org/index.html">Doxygen</a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
